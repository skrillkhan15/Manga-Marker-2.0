(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>sE});var s=a(95155),r=a(12115);function l(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}let n=function(e,t){let[a,s]=(0,r.useState)(()=>{try{let a=window.localStorage.getItem(e);if(null===a)return t;let s=l(a);return null!==s?s:a}catch(a){return console.error("Error reading localStorage key “".concat(e,"”:"),a),t}}),n=(0,r.useCallback)(t=>{try{let r=t instanceof Function?t(a):t;s(r);{let t="object"==typeof r?JSON.stringify(r):String(r);window.localStorage.setItem(e,t)}}catch(t){console.error("Error setting localStorage key “".concat(e,"”:"),t)}},[e,a]);return(0,r.useEffect)(()=>{let a=a=>{if(a.key===e)if(a.newValue)try{let e=l(a.newValue);s(null!==e?e:a.newValue)}catch(e){s(a.newValue)}else s(t)};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[e,t]),[a,n]};var i=a(99708),d=a(74466),o=a(15546);function c(){let[e,t]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(e.matches)};return e.addEventListener("change",a),t(e.matches),()=>e.removeEventListener("change",a)},[]),e}var u=a(59434);let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:n=!1,...d}=e,o=n?i.DX:"button";return(0,s.jsx)(o,{className:(0,u.cn)(m({variant:r,size:l,className:a})),ref:t,...d})});h.displayName="Button";let x=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});x.displayName="Input";var f=a(87489);let p=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:l=!0,...n}=e;return(0,s.jsx)(f.b,{ref:t,decorative:l,orientation:r,className:(0,u.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...n})});p.displayName=f.b.displayName;var g=a(15452),j=a(25318);let v=g.bL;g.l9,g.bm;let b=g.ZL,N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});N.displayName=g.hJ.displayName;let y=(0,d.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),w=r.forwardRef((e,t)=>{let{side:a="right",className:r,children:l,...n}=e;return(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{}),(0,s.jsxs)(g.UC,{ref:t,className:(0,u.cn)(y({side:a}),r),...n,children:[l,(0,s.jsxs)(g.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});w.displayName=g.UC.displayName;let k=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};k.displayName="SheetHeader";let C=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};C.displayName="SheetFooter";let S=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.hE,{ref:t,className:(0,u.cn)("text-lg font-semibold text-foreground",a),...r})});S.displayName=g.hE.displayName;let A=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.VY,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});function R(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("animate-pulse rounded-md bg-muted",t),...a})}A.displayName=g.VY.displayName;var I=a(89613);let D=I.Kq,E=I.bL,F=I.l9,T=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(I.UC,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});T.displayName=I.UC.displayName;let z=r.createContext(null);function L(){let e=r.useContext(z);if(!e)throw Error("useSidebar must be used within a SidebarProvider");return e}let P=r.forwardRef((e,t)=>{let{defaultOpen:a=!0,open:l,onOpenChange:n,className:i,style:d,children:o,...m}=e,h=c(),[x,f]=r.useState(!1),[p,g]=r.useState(a),j=null!=l?l:p,v=r.useCallback(e=>{let t="function"==typeof e?e(j):e;n?n(t):g(t),document.cookie="".concat("sidebar_state","=").concat(t,"; path=/; max-age=").concat(604800)},[n,j]),b=r.useCallback(()=>h?f(e=>!e):v(e=>!e),[h,v,f]);r.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[b]);let N=j?"expanded":"collapsed",y=r.useMemo(()=>({state:N,open:j,setOpen:v,isMobile:null!=h&&h,openMobile:x,setOpenMobile:f,toggleSidebar:b}),[N,j,v,h,x,f,b]);return(0,s.jsx)(z.Provider,{value:y,children:(0,s.jsx)(D,{delayDuration:0,children:(0,s.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...d},className:(0,u.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",i),ref:t,...m,children:o})})})});P.displayName="SidebarProvider";let _=r.forwardRef((e,t)=>{let{side:a="left",variant:r="sidebar",collapsible:l="offcanvas",className:n,children:i,...d}=e,{isMobile:o,state:c,openMobile:m,setOpenMobile:h}=L();return"none"===l?(0,s.jsx)("div",{className:(0,u.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:t,...d,children:i}):o?(0,s.jsx)(v,{open:m,onOpenChange:h,...d,children:(0,s.jsxs)(w,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:a,children:[(0,s.jsxs)(k,{className:"sr-only",children:[(0,s.jsx)(S,{children:"Navigation Menu"}),(0,s.jsx)(A,{children:"Main navigation for the application, including dashboard, bookmarks, and settings."})]}),(0,s.jsx)("div",{className:"flex h-full w-full flex-col",children:i})]})}):(0,s.jsxs)("div",{ref:t,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":"collapsed"===c?l:"","data-variant":r,"data-side":a,children:[(0,s.jsx)("div",{className:(0,u.cn)("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===r||"inset"===r?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,s.jsx)("div",{className:(0,u.cn)("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===a?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===r||"inset"===r?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...d,children:(0,s.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});_.displayName="Sidebar";let U=r.forwardRef((e,t)=>{let{className:a,onClick:r,...l}=e,{toggleSidebar:n}=L();return(0,s.jsxs)(h,{ref:t,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,u.cn)("h-7 w-7",a),onClick:e=>{null==r||r(e),n()},...l,children:[(0,s.jsx)(o.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})});U.displayName="SidebarTrigger",r.forwardRef((e,t)=>{let{className:a,...r}=e,{toggleSidebar:l}=L();return(0,s.jsx)("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:l,title:"Toggle Sidebar",className:(0,u.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",a),...r})}).displayName="SidebarRail";let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("main",{ref:t,className:(0,u.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...r})});O.displayName="SidebarInset",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x,{ref:t,"data-sidebar":"input",className:(0,u.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",a),...r})}).displayName="SidebarInput";let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"header",className:(0,u.cn)("flex flex-col gap-2 p-2",a),...r})});M.displayName="SidebarHeader",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"footer",className:(0,u.cn)("flex flex-col gap-2 p-2",a),...r})}).displayName="SidebarFooter";let V=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(p,{ref:t,"data-sidebar":"separator",className:(0,u.cn)("mx-2 w-auto bg-sidebar-border",a),...r})});V.displayName="SidebarSeparator";let Y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"content",className:(0,u.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",a),...r})});Y.displayName="SidebarContent";let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group",className:(0,u.cn)("relative flex w-full min-w-0 flex-col p-2",a),...r})});B.displayName="SidebarGroup";let J=r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,n=r?i.DX:"div";return(0,s.jsx)(n,{ref:t,"data-sidebar":"group-label",className:(0,u.cn)("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...l})});J.displayName="SidebarGroupLabel",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,n=r?i.DX:"button";return(0,s.jsx)(n,{ref:t,"data-sidebar":"group-action",className:(0,u.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...l})}).displayName="SidebarGroupAction";let H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group-content",className:(0,u.cn)("w-full text-sm",a),...r})});H.displayName="SidebarGroupContent";let K=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu",className:(0,u.cn)("flex w-full min-w-0 flex-col gap-1",a),...r})});K.displayName="SidebarMenu";let q=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("li",{ref:t,"data-sidebar":"menu-item",className:(0,u.cn)("group/menu-item relative",a),...r})});q.displayName="SidebarMenuItem";let W=(0,d.F)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),G=r.forwardRef((e,t)=>{let{asChild:a=!1,isActive:r=!1,variant:l="default",size:n="default",tooltip:d,className:o,...c}=e,m=a?i.DX:"button",{isMobile:h,state:x}=L(),f=(0,s.jsx)(m,{ref:t,"data-sidebar":"menu-button","data-size":n,"data-active":r,className:(0,u.cn)(W({variant:l,size:n}),o),...c});return d?("string"==typeof d&&(d={children:d}),(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:f}),(0,s.jsx)(T,{side:"right",align:"center",hidden:"collapsed"!==x||h,...d})]})):f});G.displayName="SidebarMenuButton",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,showOnHover:l=!1,...n}=e,d=r?i.DX:"button";return(0,s.jsx)(d,{ref:t,"data-sidebar":"menu-action",className:(0,u.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",l&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...n})}).displayName="SidebarMenuAction",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"menu-badge",className:(0,u.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...r})}).displayName="SidebarMenuBadge",r.forwardRef((e,t)=>{let{className:a,showIcon:l=!1,...n}=e,i=r.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,s.jsxs)("div",{ref:t,"data-sidebar":"menu-skeleton",className:(0,u.cn)("rounded-md h-8 flex gap-2 px-2 items-center",a),...n,children:[l&&(0,s.jsx)(R,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,s.jsx)(R,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})}).displayName="SidebarMenuSkeleton",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu-sub",className:(0,u.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...r})}).displayName="SidebarMenuSub",r.forwardRef((e,t)=>{let{...a}=e;return(0,s.jsx)("li",{ref:t,...a})}).displayName="SidebarMenuSubItem",r.forwardRef((e,t)=>{let{asChild:a=!1,size:r="md",isActive:l,className:n,...d}=e,o=a?i.DX:"a";return(0,s.jsx)(o,{ref:t,"data-sidebar":"menu-sub-button","data-size":r,"data-active":l,className:(0,u.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",n),...d})}).displayName="SidebarMenuSubButton";var X=a(10518),Z=a(36170),Q=a(38350),$=a(23129),ee=a(77223),et=a(61021),ea=a(50172),es=a(63982),er=a(10469),el=a(34214),en=a(3638),ei=a(18271),ed=a(66766),eo=a(35714),ec=a(41297),eu=a(40295),em=a(9917),eh=a(86438),ex=a(18046),ef=a(30462),ep=a(8745),eg=a(18763),ej=a(53054),ev=a(94504);let eb=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,u.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});eb.displayName="Card";let eN=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,u.cn)("flex flex-col space-y-1.5 p-6",a),...r})});eN.displayName="CardHeader";let ey=r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...l}=e,n=r?i.DX:"h3";return(0,s.jsx)(n,{ref:t,className:(0,u.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});ey.displayName="CardTitle";let ew=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});ew.displayName="CardDescription";let ek=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,u.cn)("p-6 pt-0",a),...r})});ek.displayName="CardContent";let eC=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center p-6 pt-0",a),...r})});eC.displayName="CardFooter";var eS=a(76981);let eA=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eS.bL,{ref:t,className:(0,u.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(eS.C1,{className:(0,u.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(X.A,{className:"h-4 w-4"})})})});eA.displayName=eS.bL.displayName;let eR=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eI(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,u.cn)(eR({variant:a}),t),...r})}var eD=a(55863);let eE=r.forwardRef((e,t)=>{let{className:a,value:r,...l}=e;return(0,s.jsx)(eD.bL,{ref:t,className:(0,u.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,s.jsx)(eD.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});eE.displayName=eD.bL.displayName;var eF=a(8619),eT=a(46896),ez=a(70881),eL=a(11349);function eP(e){let{children:t,onFavorite:a,onDelete:l,isFavorite:n}=e,i=(0,eF.d)(0),d=(0,eT.s)(),o=(0,r.useRef)(null),c=e=>{"favorite"===e?a():l(),d.start({x:0})};return(0,ez.G)(i,[-160,0],["hsl(var(--primary))","hsl(var(--destructive))"]),(0,s.jsxs)("div",{ref:o,className:"relative w-full overflow-hidden",children:[(0,s.jsx)(eL.P.div,{className:"absolute top-0 right-0 h-full flex items-center justify-end",style:{x:(0,ez.G)(i,e=>"".concat(e,"px"))},children:(0,s.jsxs)("div",{className:"flex h-full",children:[(0,s.jsx)("button",{onClick:()=>c("favorite"),className:"w-20 h-full flex items-center justify-center bg-primary text-primary-foreground",children:(0,s.jsx)(ef.A,{className:"w-6 h-6 ".concat(n?"fill-current":"")})}),(0,s.jsx)("button",{onClick:()=>c("delete"),className:"w-20 h-full flex items-center justify-center bg-destructive text-destructive-foreground",children:(0,s.jsx)(ee.A,{className:"w-6 h-6"})})]})}),(0,s.jsx)(eL.P.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragEnd:(e,t)=>{let{offset:a,velocity:s}=t;a.x<-80?d.start({x:-160}):(a.x>80&&a.x,d.start({x:0}))},animate:d,transition:{type:"tween",ease:"easeInOut",duration:.3},style:{x:i},className:"relative bg-background z-10",children:t})]})}var e_=a(87481);function eU(e){let{rating:t,setRating:a,className:r,size:l=4}=e,n=!!a,i=e=>{a&&a(t===e?0:e)};return(0,s.jsx)("div",{className:(0,u.cn)("flex items-center gap-0.5",r),children:[1,2,3,4,5].map(e=>(0,s.jsx)(ef.A,{className:(0,u.cn)("w-".concat(l," h-").concat(l),t>=e?"text-yellow-400 fill-yellow-400":"text-muted-foreground/50",n&&"cursor-pointer"),onClick:()=>i(e)},e))})}let eO=()=>{if("vibrate"in navigator)try{navigator.vibrate(50)}catch(e){console.warn("Haptic feedback failed.",e)}};function eM(e){var t;let{bookmark:a,status:l,onEdit:n,onToggleFavorite:i,onTogglePinned:d,onUpdateChapter:o,onDelete:m,isSelected:x,onSelectionChange:f,isCompact:p,isManualSortActive:g=!1}=e,[j,v]=(0,r.useState)(""),b=(0,r.useRef)(null),N=(0,r.useRef)(),y=c(),{toast:w}=(0,e_.dj)();(0,r.useEffect)(()=>{let e=()=>{try{v((0,eo.m)(new Date(a.lastUpdated),{addSuffix:!0}))}catch(e){v("a few seconds ago")}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[a.lastUpdated]);let k=(0,r.useMemo)(()=>{try{return(0,ec.GP)(new Date(a.lastUpdated),"PPP")}catch(e){return"Invalid date"}},[a.lastUpdated]),C=(0,r.useMemo)(()=>a.totalChapters&&a.totalChapters>0?Math.round((a.chapter||0)/a.totalChapters*100):null,[a.chapter,a.totalChapters]),S=()=>{N.current=setTimeout(()=>{eO(),f(a.id,!0)},500)},A=()=>{N.current&&clearTimeout(N.current)},R=e=>{eO(),o(a.id,e)},I=(0,s.jsxs)(eb,{ref:b,className:(0,u.cn)("flex flex-col bg-background/30 backdrop-blur-lg border shadow-lg hover:shadow-primary/20 transition-all duration-300 transform hover:-translate-y-1 w-full animate-fade-in",x?"border-primary shadow-primary/30":"border-white/20",a.color&&!x?"border-l-4":"border-l-transparent",g&&"cursor-grab active:cursor-grabbing"),style:{borderLeftColor:x?void 0:a.color},onTouchStart:S,onTouchEnd:A,onMouseDown:S,onMouseUp:A,onMouseLeave:()=>{N.current&&clearTimeout(N.current)},children:[g&&(0,s.jsx)("div",{className:"absolute top-2 left-1 text-muted-foreground/50",children:(0,s.jsx)(eu.A,{className:"w-5 h-5"})}),a.isPinned&&(0,s.jsx)(D,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("div",{className:"absolute top-2 right-2 text-muted-foreground",children:(0,s.jsx)(em.A,{className:"w-4 h-4 text-primary fill-primary"})})}),(0,s.jsx)(T,{children:(0,s.jsx)("p",{children:"Pinned"})})]})}),(0,s.jsxs)(eN,{className:"flex flex-row items-start gap-4 space-y-0 pb-2",children:[(0,s.jsx)("div",{className:"flex items-center h-full pt-1",children:(0,s.jsx)(eA,{checked:x,onCheckedChange:e=>f(a.id,!!e),"aria-label":"Select bookmark ".concat(a.title),className:(0,u.cn)("mr-2",g&&"ml-4")})}),!p&&(0,s.jsxs)("div",{className:"relative w-16 h-24 rounded-md overflow-hidden shrink-0",children:[(0,s.jsx)(ed.default,{src:a.coverImage||"https://placehold.co/128x192.png",alt:"Cover for ".concat(a.title),"data-ai-hint":"manga cover",width:128,height:192,className:"bg-muted object-cover",loading:"lazy"}),l&&(0,s.jsx)(D,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1",style:{backgroundColor:l.color}})}),(0,s.jsx)(T,{children:(0,s.jsx)("p",{children:l.label})})]})})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(D,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)(ey,{asChild:!0,children:(0,s.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg leading-tight hover:underline",children:a.alias||a.title})})}),a.alias&&(0,s.jsx)(T,{children:(0,s.jsx)("p",{children:a.title})})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)(h,{variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>R((a.chapter||0)-1),disabled:0>=(a.chapter||0),children:(0,s.jsx)(eh.A,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm font-semibold w-10 text-center",children:["Ch. ",a.chapter||0]}),(0,s.jsx)(h,{variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>R((a.chapter||0)+1),children:(0,s.jsx)(ex.A,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>{eO(),i(a.id)},children:(0,s.jsx)(ef.A,{className:"w-5 h-5 transition-colors ".concat(a.isFavorite?"text-yellow-400 fill-yellow-400":"text-muted-foreground")})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>{eO(),d(a.id)},children:a.isPinned?(0,s.jsx)(ep.A,{className:"w-4 h-4 text-primary"}):(0,s.jsx)(em.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>n(a),children:(0,s.jsx)(eg.A,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)(ek,{className:"flex-grow pb-4 px-6 space-y-3",children:[(null!=(t=a.rating)?t:0)>0&&(0,s.jsx)(eU,{rating:a.rating||0}),null!==C&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs text-muted-foreground mb-1",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:[a.chapter,"/",a.totalChapters," (",C,"%)"]})]}),(0,s.jsx)(eE,{value:C,className:"h-2"})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",title:k,children:["Updated: ",j||k]}),a.tags&&a.tags.length>0||a.notes?(0,s.jsx)("div",{className:"flex items-start gap-1.5 flex-wrap",children:(0,s.jsxs)(D,{children:[a.tags&&a.tags.length>0&&(0,s.jsxs)(E,{children:[(0,s.jsxs)(F,{className:"flex items-center gap-1.5 flex-wrap",children:[(0,s.jsx)(ej.A,{className:"w-3.5 h-3.5 text-muted-foreground"}),a.tags.slice(0,2).map(e=>(0,s.jsx)(eI,{variant:"secondary",className:"text-xs",children:e},e)),a.tags.length>2&&(0,s.jsxs)(eI,{variant:"secondary",className:"text-xs",children:["+",a.tags.length-2]})]}),(0,s.jsx)(T,{children:a.tags.join(", ")})]}),a.notes&&(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{children:(0,s.jsx)(ev.A,{className:"w-3.5 h-3.5 text-muted-foreground ml-2 cursor-help"})}),(0,s.jsx)(T,{className:"max-w-xs",children:(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a.notes})})]})]})}):null]})]});return y?(0,s.jsx)(eP,{onFavorite:()=>{i(a.id),eO(),w({title:a.isFavorite?"Removed from Favorites":"Added to Favorites",description:'"'.concat(a.title,'" updated.')})},onDelete:()=>{eO(),m([a.id])},isFavorite:a.isFavorite,children:I}):I}var eV=a(82733);function eY(e){var t,a;let{bookmark:l,status:n,onEdit:i,onToggleFavorite:d,onTogglePinned:o,onUpdateChapter:m,onDelete:x,isSelected:f,onSelectionChange:p,isCompact:g,isManualSortActive:j=!1}=e,[v,b]=(0,r.useState)(""),N=c(),{toast:y}=(0,e_.dj)();(0,r.useEffect)(()=>{let e=()=>{try{b((0,eo.m)(new Date(l.lastUpdated),{addSuffix:!0}))}catch(e){b("a few seconds ago")}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[l.lastUpdated]);let w=(0,r.useMemo)(()=>l.totalChapters&&l.totalChapters>0?Math.round((l.chapter||0)/l.totalChapters*100):null,[l.chapter,l.totalChapters]),k=(0,r.useRef)(null),C=(0,r.useRef)(),S=()=>{C.current=setTimeout(()=>{eO(),p(l.id,!0)},500)},A=()=>{clearTimeout(C.current)},R=e=>{eO(),m(l.id,e)},I=(0,s.jsxs)("div",{ref:k,className:(0,u.cn)("flex items-center gap-4 p-2 rounded-lg border transition-colors w-full animate-fade-in relative",f?"bg-muted/80 border-primary":"bg-muted/30 hover:bg-muted/60",l.color&&!f&&"border-l-4",j&&"cursor-grab active:cursor-grabbing"),style:{borderColor:f?void 0:null!=(t=l.color)?t:null==n?void 0:n.color},onTouchStart:S,onTouchEnd:A,onMouseDown:S,onMouseUp:A,onMouseLeave:()=>{clearTimeout(C.current)},children:[l.isPinned&&(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("div",{className:"absolute top-1 left-1 text-muted-foreground",children:(0,s.jsx)(em.A,{className:"w-3.5 h-3.5 text-primary fill-primary"})})}),(0,s.jsx)(T,{children:(0,s.jsx)("p",{children:"Pinned"})})]}),j&&(0,s.jsx)("div",{className:"text-muted-foreground/50",children:(0,s.jsx)(eu.A,{className:"w-5 h-5"})}),(0,s.jsx)(eA,{checked:f,onCheckedChange:e=>p(l.id,!!e),"aria-label":"Select bookmark ".concat(l.title),className:"ml-2"}),!g&&(0,s.jsx)("div",{className:"relative w-10 h-14 rounded-md overflow-hidden shrink-0",children:(0,s.jsx)(ed.default,{src:l.coverImage||"https://placehold.co/80x112.png",alt:"Cover for ".concat(l.title),"data-ai-hint":"manga cover",layout:"fill",objectFit:"cover",className:"bg-muted",loading:"lazy"})}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-5 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col col-span-2",children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold hover:underline truncate",title:l.title,children:l.alias||l.title})}),l.alias&&(0,s.jsx)(T,{children:(0,s.jsx)("p",{children:l.title})})]}),null!==w?(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(eE,{value:w,className:"h-1.5 w-24"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[l.chapter,"/",l.totalChapters]})]}):(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Updated ",v]})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(null!=(a=l.rating)?a:0)>0&&(0,s.jsx)(eU,{rating:l.rating||0})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,s.jsx)(h,{variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>R((l.chapter||0)-1),disabled:0>=(l.chapter||0),children:(0,s.jsx)(eh.A,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm font-semibold w-12 text-center",children:["Ch. ",l.chapter||0]}),(0,s.jsx)(h,{variant:"outline",size:"icon",className:"w-7 h-7",onClick:()=>R((l.chapter||0)+1),children:(0,s.jsx)(ex.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 justify-end",children:[l.tags&&l.tags.length>0&&(0,s.jsxs)(E,{children:[(0,s.jsxs)(F,{className:"flex items-center",children:[(0,s.jsx)(ej.A,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm ml-1",children:l.tags.length})]}),(0,s.jsx)(T,{children:l.tags.join(", ")})]}),n&&(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{className:"flex items-center",children:n.icon?(0,s.jsx)("span",{className:"text-lg",style:{color:n.color},children:n.icon}):(0,s.jsx)(eV.A,{className:"w-4 h-4",style:{color:n.color}})}),(0,s.jsx)(T,{children:n.label})]}),l.notes&&(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{children:(0,s.jsx)(ev.A,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),(0,s.jsx)(T,{className:"max-w-xs",children:(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:l.notes})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 pr-2",children:[(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>{eO(),d(l.id)},children:(0,s.jsx)(ef.A,{className:"w-5 h-5 transition-colors ".concat(l.isFavorite?"text-yellow-400 fill-yellow-400":"text-muted-foreground")})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>{eO(),o(l.id)},children:l.isPinned?(0,s.jsx)(ep.A,{className:"w-4 h-4 text-primary"}):(0,s.jsx)(em.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 shrink-0",onClick:()=>i(l),children:(0,s.jsx)(eg.A,{className:"w-4 h-4"})})]})]});return N?(0,s.jsx)(eP,{onFavorite:()=>{d(l.id),eO(),y({title:l.isFavorite?"Removed from Favorites":"Added to Favorites",description:'"'.concat(l.title,'" updated.')})},onDelete:()=>{eO(),x([l.id])},isFavorite:l.isFavorite,children:I}):I}var eB=a(9572),eJ=a(14675),eH=a(79556),eK=a(12023),eq=a(21887),eW=a(66655),eG=a(81008),eX=a(34301),eZ=a(88808),eQ=a(98847),e$=a(58127),e0=a(92555),e4=a(31992),e2=a(77381);let e1=e4.bL;e4.YJ;let e5=e4.WT,e8=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(e4.l9,{ref:t,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(e4.In,{asChild:!0,children:(0,s.jsx)(eH.A,{className:"h-4 w-4 opacity-50"})})]})});e8.displayName=e4.l9.displayName;let e3=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e4.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(e2.A,{className:"h-4 w-4"})})});e3.displayName=e4.PP.displayName;let e6=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e4.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(eH.A,{className:"h-4 w-4"})})});e6.displayName=e4.wn.displayName;let e7=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(e4.ZL,{children:(0,s.jsxs)(e4.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(e3,{}),(0,s.jsx)(e4.LM,{className:(0,u.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(e6,{})]})})});e7.displayName=e4.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e4.JU,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=e4.JU.displayName;let e9=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(e4.q7,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(e4.VF,{children:(0,s.jsx)(X.A,{className:"h-4 w-4"})})}),(0,s.jsx)(e4.p4,{children:r})]})});e9.displayName=e4.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(e4.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=e4.wv.displayName;var te=a(20547);let tt=te.bL,ta=te.l9,ts=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...n}=e;return(0,s.jsx)(te.ZL,{children:(0,s.jsx)(te.UC,{ref:t,align:r,sideOffset:l,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});ts.displayName=te.UC.displayName;var tr=a(48698),tl=a(73158),tn=a(70154);let ti=tr.bL,td=tr.l9;tr.YJ,tr.ZL,tr.Pb,tr.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:l,...n}=e;return(0,s.jsxs)(tr.ZP,{ref:t,className:(0,u.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n,children:[l,(0,s.jsx)(tl.A,{className:"ml-auto"})]})}).displayName=tr.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tr.G5,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=tr.G5.displayName;let to=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...l}=e;return(0,s.jsx)(tr.ZL,{children:(0,s.jsx)(tr.UC,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});to.displayName=tr.UC.displayName;let tc=r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(tr.q7,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l})});tc.displayName=tr.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:l,...n}=e;return(0,s.jsxs)(tr.H_,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(tr.VF,{children:(0,s.jsx)(X.A,{className:"h-4 w-4"})})}),r]})}).displayName=tr.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(tr.hN,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(tr.VF,{children:(0,s.jsx)(tn.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=tr.hN.displayName;let tu=r.forwardRef((e,t)=>{let{className:a,inset:r,...l}=e;return(0,s.jsx)(tr.JU,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...l})});tu.displayName=tr.JU.displayName;let tm=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tr.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});tm.displayName=tr.wv.displayName;var th=a(47655);let tx=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(th.bL,{ref:t,className:(0,u.cn)("relative overflow-hidden",a),...l,children:[(0,s.jsx)(th.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(tf,{}),(0,s.jsx)(th.OK,{})]})});tx.displayName=th.bL.displayName;let tf=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...l}=e;return(0,s.jsx)(th.VM,{ref:t,orientation:r,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,s.jsx)(th.lr,{className:"relative flex-1 rounded-full bg-border"})})});tf.displayName=th.VM.displayName;var tp=a(51010),tg=a(73936);let tj=(0,d.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,...n}=e;return(0,s.jsx)(tg.b,{ref:t,className:(0,u.cn)(tj({variant:r,size:l,className:a})),...n})}).displayName=tg.b.displayName;let tv=r.createContext({size:"default",variant:"default"}),tb=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,children:n,...i}=e;return(0,s.jsx)(tp.bL,{ref:t,className:(0,u.cn)("flex items-center justify-center gap-1",a),...i,children:(0,s.jsx)(tv.Provider,{value:{variant:r,size:l},children:n})})});tb.displayName=tp.bL.displayName;let tN=r.forwardRef((e,t)=>{let{className:a,children:l,variant:n,size:i,...d}=e,o=r.useContext(tv);return(0,s.jsx)(tp.q7,{ref:t,className:(0,u.cn)(tj({variant:o.variant||n,size:o.size||i}),a),...d,children:l})});tN.displayName=tp.q7.displayName;var ty=a(40968);let tw=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tk=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(ty.b,{ref:t,className:(0,u.cn)(tw(),a),...r})});tk.displayName=ty.b.displayName;var tC=a(4884);let tS=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tC.bL,{className:(0,u.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(tC.zi,{className:(0,u.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});tS.displayName=tC.bL.displayName;var tA=a(90221),tR=a(62177),tI=a(70927);let tD=tR.Op,tE=r.createContext({}),tF=e=>{let{...t}=e;return(0,s.jsx)(tE.Provider,{value:{name:t.name},children:(0,s.jsx)(tR.xI,{...t})})},tT=()=>{let e=r.useContext(tE),t=r.useContext(tz),{getFieldState:a,formState:s}=(0,tR.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},tz=r.createContext({}),tL=r.forwardRef((e,t)=>{let{className:a,...l}=e,n=r.useId();return(0,s.jsx)(tz.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,u.cn)("space-y-2",a),...l})})});tL.displayName="FormItem";let tP=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:l,formItemId:n}=tT();return(0,s.jsx)(tk,{ref:t,className:(0,u.cn)(l&&"text-destructive",a),htmlFor:n,...r})});tP.displayName="FormLabel";let t_=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:l,formDescriptionId:n,formMessageId:d}=tT();return(0,s.jsx)(i.DX,{ref:t,id:l,"aria-describedby":r?"".concat(n," ").concat(d):"".concat(n),"aria-invalid":!!r,...a})});t_.displayName="FormControl";let tU=r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:l}=tT();return(0,s.jsx)("p",{ref:t,id:l,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});tU.displayName="FormDescription";let tO=r.forwardRef((e,t)=>{var a;let{className:r,children:l,...n}=e,{error:i,formMessageId:d}=tT(),o=i?String(null!=(a=null==i?void 0:i.message)?a:""):l;return o?(0,s.jsx)("p",{ref:t,id:d,className:(0,u.cn)("text-sm font-medium text-destructive",r),...n,children:o}):null});tO.displayName="FormMessage";let tM=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});tM.displayName="Textarea";var tV=a(16923),tY=a(74601),tB=a(8531),tJ=a(60704);let tH=tJ.bL,tK=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tJ.B8,{ref:t,className:(0,u.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});tK.displayName=tJ.B8.displayName;let tq=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tJ.l9,{ref:t,className:(0,u.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});tq.displayName=tJ.l9.displayName;let tW=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(tJ.UC,{ref:t,className:(0,u.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});tW.displayName=tJ.UC.displayName;let tG=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#14b8a6","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#ec4899","#78716c"];function tX(e){let{color:t,onChange:a}=e;return(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[(0,s.jsx)("button",{onClick:()=>a(""),className:"w-6 h-6 rounded-full border-2 flex items-center justify-center bg-background hover:border-primary/50 ".concat(t?"border-transparent":"border-primary"),"aria-label":"No color",children:(0,s.jsx)("div",{className:"w-4/5 h-px bg-red-500 transform rotate-45 absolute"})}),tG.map(e=>(0,s.jsx)("button",{onClick:()=>a(e),className:"w-6 h-6 rounded-full border-2 ".concat(t===e?"border-primary":"border-transparent"," hover:border-primary/50"),style:{backgroundColor:e},"aria-label":"Select color ".concat(e)},e))]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:t}}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),placeholder:"#... or name",className:"w-full p-1 text-sm border rounded bg-transparent"})]})]})}var tZ=a(5227),tQ=a(70831);let t$=tI.Ik({title:tI.Yj().min(1,{message:"Title cannot be empty."}),alias:tI.Yj().optional(),url:tI.Yj().url({message:"Please enter a valid URL."}),chapter:tI.au.number().min(0).optional(),totalChapters:tI.au.number().min(0).optional(),tags:tI.YO(tI.Yj()).optional(),coverImage:tI.Yj().optional(),statusId:tI.Yj({required_error:"Please select a status."}),notes:tI.Yj().optional(),folderId:tI.Yj().optional(),reminderDays:tI.au.number().min(0).optional(),rating:tI.au.number().min(0).max(5).optional(),color:tI.Yj().optional()});function t0(e){var t,a;let{open:l,onOpenChange:n,onSubmit:i,onRevert:d,bookmark:o,readingStatuses:c,folders:u}=e,[m,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[b,N]=(0,r.useState)(!1),y=r.useRef(null),{toast:R}=(0,e_.dj)(),I=(0,tR.mN)({resolver:(0,tA.u)(t$),defaultValues:{title:"",alias:"",url:"",chapter:0,totalChapters:0,tags:[],coverImage:"",statusId:(null==(t=c[0])?void 0:t.id)||"plan-to-read",notes:"",folderId:"",reminderDays:0,rating:0,color:""}});(0,r.useEffect)(()=>{if(l){var e,t,a;o?(I.reset({title:o.title,alias:o.alias||"",url:o.url,chapter:o.chapter||0,totalChapters:o.totalChapters||0,tags:o.tags||[],coverImage:o.coverImage||"",statusId:o.statusId||(null==(e=c[0])?void 0:e.id),notes:o.notes||"",folderId:o.folderId||"",reminderDays:0,rating:o.rating||0,color:o.color||""}),g(o.coverImage||null)):(I.reset({title:"",alias:"",url:"",chapter:0,totalChapters:0,tags:[],coverImage:"",statusId:(null==(t=c.find(e=>"plan-to-read"===e.id))?void 0:t.id)||(null==(a=c[0])?void 0:a.id),notes:"",folderId:"",reminderDays:0,rating:0,color:""}),g(null))}},[o,I,l,c]);let D=I.watch("url"),E=I.watch("color");(0,r.useEffect)(()=>{if(D&&!b){let e=D.match(/(?:[/-]|chapter(?:-|_))(\d+(?:\.\d+)?)(?=[/?#]|$)/i);if(e&&e[1]){let t=parseFloat(e[1]);isNaN(t)||I.setValue("chapter",t,{shouldValidate:!0})}}},[D,I,b]);let F=async()=>{let e=I.getValues("url");if(!e||!tI.Yj().url().safeParse(e).success)return void R({title:"Invalid URL",description:"Please enter a valid URL to fetch metadata.",variant:"destructive"});N(!0);try{let t=await fetch("/api/extract-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(t.ok){let{title:e,chapter:a}=await t.json();I.setValue("title",e,{shouldValidate:!0}),I.setValue("chapter",a,{shouldValidate:!0}),R({title:"Metadata Extracted!",description:"Title and chapter have been filled in."})}else{let e=await t.json();throw Error(e.error||"Failed to fetch metadata")}}catch(e){console.error("Failed to fetch metadata:",e),R({title:"Extraction Failed",description:"Could not automatically extract metadata. Please fill in the details manually.",variant:"destructive"})}finally{N(!1)}},T=e=>{if("Enter"===e.key&&""!==m.trim()){e.preventDefault();let t=m.trim(),a=I.getValues("tags")||[];a.includes(t)||I.setValue("tags",[...a,t]),f("")}},z=e=>{let t=I.getValues("tags")||[];I.setValue("tags",t.filter(t=>t!==e))},L=e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{let t=e.result;I.setValue("coverImage",t),g(t)},e.readAsDataURL(a)}},P=o&&o.history&&o.history.length>0;return(0,s.jsx)(v,{open:l,onOpenChange:n,children:(0,s.jsxs)(w,{side:"bottom",className:"max-h-[90vh]",children:[(0,s.jsxs)(k,{children:[(0,s.jsx)(S,{children:o?"Edit Bookmark":"Add New Bookmark"}),(0,s.jsx)(A,{children:o?"Update the details for your bookmark.":"Add a new manga or manhwa to your list."})]}),(0,s.jsxs)(tH,{defaultValue:"details",className:"w-full mt-4",children:[(0,s.jsxs)(tK,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(tq,{value:"details",children:"Details"}),(0,s.jsxs)(tq,{value:"history",disabled:!P,children:[(0,s.jsx)(en.A,{className:"w-4 h-4 mr-2"}),"History"]})]}),(0,s.jsx)(tW,{value:"details",children:(0,s.jsx)(tD,{...I,children:(0,s.jsxs)("form",{onSubmit:I.handleSubmit(e=>{let t=e.reminderDays&&e.reminderDays>0?(0,tZ.x)((0,tQ.f)(new Date,e.reminderDays)):void 0;i({...e,folderId:"__none__"===e.folderId?void 0:e.folderId,reminderDate:t},null==o?void 0:o.id),n(!1),I.reset(),g(null)}),className:"space-y-4 overflow-y-auto p-1 mt-4 max-h-[60vh]",children:[(0,s.jsx)(tF,{control:I.control,name:"coverImage",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Cover Image"}),(0,s.jsx)(t_,{children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",ref:y,onChange:L,className:"hidden"}),(0,s.jsxs)(h,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},children:[(0,s.jsx)(tV.A,{className:"mr-2 h-4 w-4"}),"Upload Image"]})]})}),p&&(0,s.jsx)("div",{className:"mt-4 relative w-32 h-48 mx-auto rounded-md overflow-hidden",children:(0,s.jsx)(ed.default,{src:p,alt:"Cover preview",layout:"fill",objectFit:"cover"})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"url",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Chapter URL"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"https://.../chapter-123",...t})}),(0,s.jsx)(h,{type:"button",variant:"outline",size:"icon",onClick:F,disabled:b,"aria-label":"Fetch metadata",children:b?(0,s.jsx)(ea.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(tY.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(tU,{children:"Enter a URL and click the ✨ button to auto-fill details."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Title"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"e.g., Solo Leveling",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"alias",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Alias (Optional)"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"e.g., Solo Lvl",...t})}),(0,s.jsx)(tU,{children:"A shorter name for display in lists."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(tF,{control:I.control,name:"chapter",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Chapter"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"Current chapter",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"totalChapters",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Total Chapters"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"e.g., 150",...t})}),(0,s.jsx)(tO,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(tF,{control:I.control,name:"statusId",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Status"}),(0,s.jsxs)(e1,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(t_,{children:(0,s.jsx)(e8,{children:(0,s.jsx)(e5,{placeholder:"Select a status"})})}),(0,s.jsx)(e7,{children:c.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.label},e.id))})]}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"folderId",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Folder"}),(0,s.jsxs)(e1,{onValueChange:t.onChange,value:t.value||"__none__",children:[(0,s.jsx)(t_,{children:(0,s.jsx)(e8,{children:(0,s.jsx)(e5,{placeholder:"No folder"})})}),(0,s.jsxs)(e7,{children:[(0,s.jsx)(e9,{value:"__none__",children:"No folder"}),u.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)(tO,{})]})}})]}),(0,s.jsx)(tF,{control:I.control,name:"rating",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Rating"}),(0,s.jsx)(t_,{children:(0,s.jsx)(eU,{rating:t.value||0,setRating:t.onChange,size:6})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"color",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Color Label"}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsx)(t_,{children:(0,s.jsxs)(h,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded-sm border mr-2",style:{backgroundColor:E}}),E?(0,s.jsx)("span",{children:E}):(0,s.jsx)("span",{className:"text-muted-foreground",children:"Select a color"})]})})}),(0,s.jsx)(ts,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(tX,{color:t.value||"",onChange:t.onChange})})]}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"tags",render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Tags"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"Add a tag and press Enter",value:m,onChange:e=>f(e.target.value),onKeyDown:T})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-2",children:null==(t=a.value)?void 0:t.map(e=>(0,s.jsxs)(eI,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>z(e),className:"rounded-full hover:bg-muted-foreground/20",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]},e))}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"notes",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Notes"}),(0,s.jsx)(t_,{children:(0,s.jsx)(tM,{placeholder:"Add personal notes here...",className:"resize-y",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:I.control,name:"reminderDays",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Set a reminder (in days)"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"e.g., 7 for one week",...t,onChange:e=>t.onChange(parseInt(e.target.value,10)||0)})}),(0,s.jsx)(tU,{children:"Leave at 0 to not set a reminder."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsxs)(C,{className:"pt-4 flex flex-row justify-end",children:[(0,s.jsx)(h,{type:"button",variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)(h,{type:"submit",children:o?"Save Changes":"Add Bookmark"})]})]})})}),(0,s.jsx)(tW,{value:"history",children:(0,s.jsx)(tx,{className:"h-full max-h-[60vh] w-full p-1 mt-2",children:(0,s.jsx)("div",{className:"space-y-4",children:null==o||null==(a=o.history)?void 0:a.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Version from ",(0,eo.m)(new Date(e.date),{addSuffix:!0})]}),(0,s.jsxs)(h,{size:"sm",variant:"outline",onClick:()=>o&&d(o.id,e),children:[(0,s.jsx)(tB.A,{className:"w-3 h-3 mr-2"}),"Revert"]})]}),(0,s.jsx)("ul",{className:"mt-2 text-xs text-muted-foreground list-disc pl-4 space-y-1",children:Object.entries(e.state).map(e=>{let[t,a]=e;return JSON.stringify(o[t])!==JSON.stringify(a)?(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[t,":"]})," ",JSON.stringify(a)]},t):null})})]},t))})})})]})]})})}let t4=g.bL;g.l9;let t2=g.ZL;g.bm;let t1=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.hJ,{ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});t1.displayName=g.hJ.displayName;let t5=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(t2,{children:[(0,s.jsx)(t1,{}),(0,s.jsxs)(g.UC,{ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,s.jsxs)(g.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});t5.displayName=g.UC.displayName;let t8=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};t8.displayName="DialogHeader";let t3=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};t3.displayName="DialogFooter";let t6=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.hE,{ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});t6.displayName=g.hE.displayName;let t7=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(g.VY,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});t7.displayName=g.VY.displayName;let t9=tI.Ik({title:tI.Yj().min(1,{message:"Title cannot be empty."}),alias:tI.Yj().optional(),url:tI.Yj().url({message:"Please enter a valid URL."}),chapter:tI.au.number().min(0).optional(),totalChapters:tI.au.number().min(0).optional(),tags:tI.YO(tI.Yj()).optional(),coverImage:tI.Yj().optional(),statusId:tI.Yj({required_error:"Please select a status."}),notes:tI.Yj().optional(),folderId:tI.Yj().optional(),reminderDays:tI.au.number().min(0).optional(),rating:tI.au.number().min(0).max(5).optional(),color:tI.Yj().optional()});function ae(e){var t,a;let{open:l,onOpenChange:n,onSubmit:i,onRevert:d,bookmark:o,readingStatuses:c,folders:u}=e,[m,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),N=r.useRef(null),{toast:y}=(0,e_.dj)(),w=(0,tR.mN)({resolver:(0,tA.u)(t9),defaultValues:{title:"",alias:"",url:"",chapter:0,totalChapters:0,tags:[],coverImage:"",statusId:(null==(t=c[0])?void 0:t.id)||"plan-to-read",notes:"",folderId:"",reminderDays:0,rating:0,color:""}});(0,r.useEffect)(()=>{if(l){var e,t,a;o?(w.reset({title:o.title,alias:o.alias||"",url:o.url,chapter:o.chapter||0,totalChapters:o.totalChapters||0,tags:o.tags||[],coverImage:o.coverImage||"",statusId:o.statusId||(null==(e=c[0])?void 0:e.id),notes:o.notes||"",folderId:o.folderId||"",reminderDays:0,rating:o.rating||0,color:o.color||""}),g(o.coverImage||null)):(w.reset({title:"",alias:"",url:"",chapter:0,totalChapters:0,tags:[],coverImage:"",statusId:(null==(t=c.find(e=>"plan-to-read"===e.id))?void 0:t.id)||(null==(a=c[0])?void 0:a.id),notes:"",folderId:"",reminderDays:0,rating:0,color:""}),g(null))}},[o,w,l,c]);let k=w.watch("url"),C=w.watch("color");(0,r.useEffect)(()=>{if(k&&!v){let e=k.match(/(?:[/-]|chapter(?:-|_))(\d+(?:\.\d+)?)(?=[/?#]|$)/i);if(e&&e[1]){let t=parseFloat(e[1]);isNaN(t)||w.setValue("chapter",t,{shouldValidate:!0})}}},[k,w,v]);let S=async()=>{let e=w.getValues("url");if(!e||!tI.Yj().url().safeParse(e).success)return void y({title:"Invalid URL",description:"Please enter a valid URL to fetch metadata.",variant:"destructive"});b(!0);try{let t=await fetch("/api/extract-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),{title:a,chapter:s,error:r}=await t.json();if(!t.ok||r)throw Error(r||"Failed to extract metadata");w.setValue("title",a,{shouldValidate:!0}),w.setValue("chapter",s,{shouldValidate:!0}),y({title:"Metadata Extracted!",description:"Title and chapter have been filled in."})}catch(e){console.error("Failed to fetch metadata:",e),y({title:"Extraction Failed",description:"Could not automatically extract metadata. Please fill in the details manually.",variant:"destructive"})}finally{b(!1)}},A=e=>{if("Enter"===e.key&&""!==m.trim()){e.preventDefault();let t=m.trim(),a=w.getValues("tags")||[];a.includes(t)||w.setValue("tags",[...a,t]),f("")}},R=e=>{let t=w.getValues("tags")||[];w.setValue("tags",t.filter(t=>t!==e))},I=e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{let t=e.result;w.setValue("coverImage",t),g(t)},e.readAsDataURL(a)}},D=o&&o.history&&o.history.length>0;return(0,s.jsx)(t4,{open:l,onOpenChange:n,children:(0,s.jsxs)(t5,{className:"sm:max-w-md",children:[(0,s.jsxs)(t8,{children:[(0,s.jsx)(t6,{children:o?"Edit Bookmark":"Add New Bookmark"}),(0,s.jsx)(t7,{children:o?"Update the details for your bookmark.":"Add a new manga or manhwa to your list."})]}),(0,s.jsxs)(tH,{defaultValue:"details",className:"w-full",children:[(0,s.jsxs)(tK,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(tq,{value:"details",children:"Details"}),(0,s.jsxs)(tq,{value:"history",disabled:!D,children:[(0,s.jsx)(en.A,{className:"w-4 h-4 mr-2"}),"History"]})]}),(0,s.jsx)(tW,{value:"details",children:(0,s.jsx)(tD,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(e=>{let t=e.reminderDays&&e.reminderDays>0?(0,tZ.x)((0,tQ.f)(new Date,e.reminderDays)):void 0;i({...e,folderId:"__none__"===e.folderId?void 0:e.folderId,reminderDate:t},null==o?void 0:o.id),n(!1),w.reset(),g(null)}),className:"space-y-4 max-h-[60vh] overflow-y-auto p-1 mt-2",children:[(0,s.jsx)(tF,{control:w.control,name:"coverImage",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Cover Image"}),(0,s.jsx)(t_,{children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",ref:N,onChange:I,className:"hidden"}),(0,s.jsxs)(h,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var e;return null==(e=N.current)?void 0:e.click()},children:[(0,s.jsx)(tV.A,{className:"mr-2 h-4 w-4"}),"Upload Image"]})]})}),p&&(0,s.jsx)("div",{className:"mt-4 relative w-32 h-48 mx-auto rounded-md overflow-hidden",children:(0,s.jsx)(ed.default,{src:p,alt:"Cover preview",fill:!0,style:{objectFit:"cover"}})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"url",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Chapter URL"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"https://.../chapter-123",...t})}),(0,s.jsx)(h,{type:"button",variant:"outline",size:"icon",onClick:S,disabled:v,"aria-label":"Fetch metadata",children:v?(0,s.jsx)(ea.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(tY.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(tU,{children:"Enter a URL and click the ✨ button to auto-fill details."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"title",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Title"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"e.g., Solo Leveling",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"alias",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Alias (Optional)"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"e.g., Solo Lvl",...t})}),(0,s.jsx)(tU,{children:"A shorter name for display in lists."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(tF,{control:w.control,name:"chapter",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Chapter"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"Current chapter",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"totalChapters",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Total Chapters"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"e.g., 150",...t})}),(0,s.jsx)(tO,{})]})}})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(tF,{control:w.control,name:"statusId",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Status"}),(0,s.jsxs)(e1,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(t_,{children:(0,s.jsx)(e8,{children:(0,s.jsx)(e5,{placeholder:"Select a status"})})}),(0,s.jsx)(e7,{children:c.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.label},e.id))})]}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"folderId",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Folder"}),(0,s.jsxs)(e1,{onValueChange:t.onChange,value:t.value||"__none__",children:[(0,s.jsx)(t_,{children:(0,s.jsx)(e8,{children:(0,s.jsx)(e5,{placeholder:"No folder"})})}),(0,s.jsxs)(e7,{children:[(0,s.jsx)(e9,{value:"__none__",children:"No folder"}),u.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)(tO,{})]})}})]}),(0,s.jsx)(tF,{control:w.control,name:"rating",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Rating"}),(0,s.jsx)(t_,{children:(0,s.jsx)(eU,{rating:t.value||0,setRating:t.onChange,size:6})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"color",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Color Label"}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsx)(t_,{children:(0,s.jsxs)(h,{type:"button",variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded-sm border mr-2",style:{backgroundColor:C}}),C?(0,s.jsx)("span",{children:C}):(0,s.jsx)("span",{className:"text-muted-foreground",children:"Select a color"})]})})}),(0,s.jsx)(ts,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(tX,{color:t.value||"",onChange:t.onChange})})]}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"tags",render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Tags"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{placeholder:"Add a tag and press Enter",value:m,onChange:e=>f(e.target.value),onKeyDown:A})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 pt-2",children:null==(t=a.value)?void 0:t.map(e=>(0,s.jsxs)(eI,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>R(e),className:"rounded-full hover:bg-muted-foreground/20",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]},e))}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"notes",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Notes"}),(0,s.jsx)(t_,{children:(0,s.jsx)(tM,{placeholder:"Add personal notes here...",className:"resize-y",...t})}),(0,s.jsx)(tO,{})]})}}),(0,s.jsx)(tF,{control:w.control,name:"reminderDays",render:e=>{let{field:t}=e;return(0,s.jsxs)(tL,{children:[(0,s.jsx)(tP,{children:"Set a reminder (in days)"}),(0,s.jsx)(t_,{children:(0,s.jsx)(x,{type:"number",placeholder:"e.g., 7 for one week",...t,onChange:e=>t.onChange(parseInt(e.target.value,10)||0)})}),(0,s.jsx)(tU,{children:"Leave at 0 to not set a reminder."}),(0,s.jsx)(tO,{})]})}}),(0,s.jsxs)(t3,{className:"pt-4",children:[(0,s.jsx)(h,{type:"button",variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,s.jsx)(h,{type:"submit",children:o?"Save Changes":"Add Bookmark"})]})]})})}),(0,s.jsx)(tW,{value:"history",children:(0,s.jsx)(tx,{className:"h-96 w-full p-1 mt-2",children:(0,s.jsx)("div",{className:"space-y-4",children:null==o||null==(a=o.history)?void 0:a.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-sm font-medium",children:["Version from ",(0,eo.m)(new Date(e.date),{addSuffix:!0})]}),(0,s.jsxs)(h,{size:"sm",variant:"outline",onClick:()=>o&&d(o.id,e),children:[(0,s.jsx)(tB.A,{className:"w-3 h-3 mr-2"}),"Revert"]})]}),(0,s.jsx)("ul",{className:"mt-2 text-xs text-muted-foreground list-disc pl-4 space-y-1",children:Object.entries(e.state).map(e=>{let[t,a]=e;return JSON.stringify(o[t])!==JSON.stringify(a)?(0,s.jsxs)("li",{children:[(0,s.jsxs)("b",{children:[t,":"]})," ",JSON.stringify(a)]},t):null})})]},t))})})})]})]})})}var at=a(17649);let aa=at.bL,as=at.l9,ar=at.ZL,al=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(at.hJ,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});al.displayName=at.hJ.displayName;let an=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(ar,{children:[(0,s.jsx)(al,{}),(0,s.jsx)(at.UC,{ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});an.displayName=at.UC.displayName;let ai=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};ai.displayName="AlertDialogHeader";let ad=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ad.displayName="AlertDialogFooter";let ao=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(at.hE,{ref:t,className:(0,u.cn)("text-lg font-semibold",a),...r})});ao.displayName=at.hE.displayName;let ac=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(at.VY,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",a),...r})});ac.displayName=at.VY.displayName;let au=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(at.rc,{ref:t,className:(0,u.cn)(m(),a),...r})});au.displayName=at.rc.displayName;let am=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(at.ZD,{ref:t,className:(0,u.cn)(m({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});am.displayName=at.ZD.displayName;var ah=a(18199),ax=a(16443);function af(e){var t;let{bookmarks:a,setBookmarks:l,allBookmarks:n,readingStatuses:i,sortPresets:d,setSortPresets:o,folders:u,onDelete:m,toggleFavorite:f,onTogglePinned:p,onUpdateChapter:g,onUpdateStatus:v,allTags:b,onEditSubmit:N,onRevert:y,onMoveToFolder:w,activeFolder:k,onClearFolderFilter:C,onFilterStateChange:S}=e,[A,R]=(0,r.useState)(""),[I,D]=(0,r.useState)("lastUpdatedDesc"),[E,F]=(0,r.useState)([]),[T,z]=(0,r.useState)([]),[L,P]=(0,r.useState)(!1),[_,U]=(0,r.useState)("all"),[O,M]=(0,r.useState)(0),[V,Y]=(0,r.useState)("grid"),[B,J]=(0,r.useState)(!1),[H,K]=(0,r.useState)(null),[q,W]=(0,r.useState)(!1),[G,X]=(0,r.useState)(!1),[Q,$]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(""),{toast:es}=(0,e_.dj)(),er=c(),[en,ei]=(0,r.useState)(a);(0,r.useEffect)(()=>{z([]),R("")},[k]),(0,r.useEffect)(()=>{ei(a)},[a]),(0,r.useEffect)(()=>{S({settings:{searchTerm:A,sortOrder:I,selectedTags:E,showFavorites:L,statusFilter:_,layout:V,isCompact:B,ratingFilter:O}})},[A,I,E,L,_,V,B,O,S]);let ed=e=>{K(e),er?W(!0):X(!0)},eo=()=>{K(null),W(!1),X(!1)},ec=(e,t)=>{N(e,t),eo()},eu=(e,t)=>{y(e,t),eo()},em=(0,r.useMemo)(()=>i.reduce((e,t)=>(e[t.id]=t,e),{}),[i]),eh=(e,t)=>{z(a=>t?[...a,e]:a.filter(t=>t!==e))},ex=(0,r.useMemo)(()=>{let e=[...en];return L&&(e=e.filter(e=>e.isFavorite)),"all"!==_&&(e=e.filter(e=>e.statusId===_)),O>0&&(e=e.filter(e=>(e.rating||0)===O)),A&&(e=e.filter(e=>{var t;return e.title.toLowerCase().includes(A.toLowerCase())||(null==(t=e.alias)?void 0:t.toLowerCase().includes(A.toLowerCase()))})),E.length>0&&(e=e.filter(e=>E.every(t=>{var a;return null==(a=e.tags)?void 0:a.includes(t)}))),e.sort((e,t)=>{if(e.isPinned!==t.isPinned)return e.isPinned?-1:1;if("manual"===I){var a,s;return(null!=(a=e.manualOrder)?a:0)-(null!=(s=t.manualOrder)?s:0)}if(e.isFavorite!==t.isFavorite)return e.isFavorite?-1:1;switch(I){case"titleAsc":return e.title.localeCompare(t.title);case"titleDesc":return t.title.localeCompare(e.title);case"chapterDesc":return(t.chapter||0)-(e.chapter||0);case"chapterAsc":return(e.chapter||0)-(t.chapter||0);case"ratingDesc":return(t.rating||0)-(e.rating||0);case"ratingAsc":return(e.rating||0)-(t.rating||0);case"lastUpdatedAsc":return new Date(e.lastUpdated).getTime()-new Date(t.lastUpdated).getTime();default:return new Date(t.lastUpdated).getTime()-new Date(e.lastUpdated).getTime()}})},[en,A,I,E,L,_,O]),ep=e=>{ei(e),l(n.map(t=>{let a=e.findIndex(e=>e.id===t.id);return -1!==a?{...t,manualOrder:a}:t})),es({title:"Order saved"})},eg=e=>{F(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ej=e=>{v(T,e),z([])},ev=e=>{w(T,e),z([])},eb=L||"all"!==_||E.length>0||O>0,eN="all"!==_?null==(t=em[_])?void 0:t.label:"",ey=()=>{if(!et.trim())return void es({title:"Preset name cannot be empty",variant:"destructive"});let e={id:Date.now().toString(),name:et,settings:{searchTerm:A,sortOrder:I,selectedTags:E,showFavorites:L,statusFilter:_,layout:V,isCompact:B,ratingFilter:O}};o(t=>[...t,e]),es({title:'Preset "'.concat(et,'" saved')}),ea(""),$(!1)},ew=e=>{let{settings:t}=e;R(t.searchTerm),D(t.sortOrder),F(t.selectedTags),P(t.showFavorites),U(t.statusFilter),Y(t.layout),J(t.isCompact),M(t.ratingFilter||0),es({title:'Preset "'.concat(e.name,'" applied')})},ek=e=>{o(t=>t.filter(t=>t.id!==e)),es({title:"Preset deleted"})},eC=e=>"manual"!==I||k?(0,s.jsx)(r.Fragment,{children:e.children},e.bookmark.id):(0,s.jsx)(ax.N,{value:e.bookmark,className:"relative",children:e.children},e.bookmark.id);return(0,s.jsxs)("div",{className:"space-y-6",children:[k&&(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg border",children:[(0,s.jsx)(Z.A,{className:"w-6 h-6 text-primary"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:k.name}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7 ml-auto",onClick:C,children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[(0,s.jsx)(x,{type:"search",placeholder:"Search by title...",className:"w-full sm:w-auto sm:min-w-64 bg-background/50",value:A,onChange:e=>R(e.target.value)}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",children:[(0,s.jsx)(eB.A,{className:"mr-2 h-4 w-4"}),"Filters"]})}),(0,s.jsxs)(to,{className:"w-56",children:[(0,s.jsx)(tu,{children:"Filter By"}),(0,s.jsx)(tm,{}),(0,s.jsxs)(tc,{onSelect:e=>{e.preventDefault(),P(!L)},children:[(0,s.jsx)(eA,{checked:L,className:"mr-2"}),"Show Favorites Only"]}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsxs)(h,{variant:"ghost",className:"w-full justify-start px-2",children:[(0,s.jsx)(ef.A,{className:"mr-2 h-4 w-4"}),"Rating"]})}),(0,s.jsx)(ts,{className:"w-auto p-2",children:(0,s.jsx)(eU,{rating:O,setRating:M,size:5})})]}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsxs)(h,{variant:"ghost",className:"w-full justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eJ.A,{className:"mr-2 h-4 w-4"}),"Tags"]}),(0,s.jsx)(eH.A,{className:"h-4 w-4"})]})}),(0,s.jsx)(ts,{className:"w-64 p-0",children:(0,s.jsx)(tx,{className:"h-48",children:(0,s.jsx)("div",{className:"p-4 space-y-2",children:b.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eA,{id:"tag-".concat(e),checked:E.includes(e),onCheckedChange:()=>eg(e)}),(0,s.jsx)("label",{htmlFor:"tag-".concat(e),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e})]},e))})})})]}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsxs)(h,{variant:"ghost",className:"w-full justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eK.A,{className:"mr-2 h-4 w-4"}),"Status"]}),(0,s.jsx)(eH.A,{className:"h-4 w-4"})]})}),(0,s.jsx)(ts,{className:"w-56 p-0",children:(0,s.jsxs)(e1,{value:_,onValueChange:e=>U(e),children:[(0,s.jsx)(e8,{className:"w-full border-0 focus:ring-0",children:(0,s.jsx)(e5,{placeholder:"Filter by status"})}),(0,s.jsxs)(e7,{children:[(0,s.jsx)(e9,{value:"all",children:"All Statuses"}),i.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.label},e.id))]})]})})]})]})]}),(0,s.jsxs)(e1,{value:I,onValueChange:e=>D(e),children:[(0,s.jsxs)(e8,{className:"w-full sm:w-[220px] bg-background/50",children:[(0,s.jsx)(eq.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(e5,{placeholder:"Sort by"})]}),(0,s.jsxs)(e7,{children:[(0,s.jsx)(e9,{value:"manual",children:"Manual Order"}),(0,s.jsx)(e9,{value:"lastUpdatedDesc",children:"Last Updated (Newest)"}),(0,s.jsx)(e9,{value:"lastUpdatedAsc",children:"Last Updated (Oldest)"}),(0,s.jsx)(e9,{value:"titleAsc",children:"Title (A-Z)"}),(0,s.jsx)(e9,{value:"titleDesc",children:"Title (Z-A)"}),(0,s.jsx)(e9,{value:"chapterDesc",children:"Chapter (High-Low)"}),(0,s.jsx)(e9,{value:"chapterAsc",children:"Chapter (Low-High)"}),(0,s.jsx)(e9,{value:"ratingDesc",children:"Rating (High-Low)"}),(0,s.jsx)(e9,{value:"ratingAsc",children:"Rating (Low-High)"})]})]}),(0,s.jsxs)(tb,{type:"single",value:V,onValueChange:e=>e&&Y(e),"aria-label":"View layout",children:[(0,s.jsx)(tN,{value:"grid","aria-label":"Grid view",children:(0,s.jsx)(eW.A,{className:"h-4 w-4"})}),(0,s.jsx)(tN,{value:"list","aria-label":"List view",children:(0,s.jsx)(el.A,{className:"h-4 w-4"})})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center p-2 bg-muted/30 rounded-lg border",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",children:[(0,s.jsx)(eG.A,{className:"mr-2 h-4 w-4"}),"Presets"]})}),(0,s.jsxs)(to,{children:[(0,s.jsx)(tu,{children:"Saved Presets"}),(0,s.jsx)(tm,{}),d.map(e=>(0,s.jsxs)(tc,{onSelect:()=>ew(e),className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(ee.A,{className:"w-3 h-3 text-destructive"})})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Delete Preset?"}),(0,s.jsxs)(ac,{children:['Are you sure you want to delete the preset "',e.name,'"? This cannot be undone.']})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>ek(e.id),children:"Delete"})]})]})]})]},e.id)),0===d.length&&(0,s.jsx)(tc,{disabled:!0,children:"No presets saved"}),(0,s.jsx)(tm,{}),(0,s.jsxs)(tc,{onSelect:()=>$(!0),children:[(0,s.jsx)(eX.A,{className:"mr-2 h-4 w-4"}),"Save Current as Preset..."]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ml-auto",children:[(0,s.jsx)(eZ.A,{className:"h-4 w-4"}),(0,s.jsx)(tk,{htmlFor:"compact-mode",children:"Compact Mode"}),(0,s.jsx)(tS,{id:"compact-mode",checked:B,onCheckedChange:J})]})]}),(0,s.jsx)(aa,{open:Q,onOpenChange:$,children:(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Save View Preset"}),(0,s.jsx)(ac,{children:"Enter a name for the current filter, sort, and view settings."})]}),(0,s.jsx)(x,{placeholder:"e.g., Favorite Manhwa",value:et,onChange:e=>ea(e.target.value),onKeyDown:e=>"Enter"===e.key&&ey()}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:ey,children:"Save"})]})]})}),eb&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-muted/30 rounded-lg border",children:[(0,s.jsx)("span",{className:"text-sm font-medium mr-2",children:"Active filters:"}),L&&(0,s.jsxs)(eI,{variant:"secondary",className:"pl-2 pr-1 cursor-pointer hover:bg-muted",onClick:()=>P(!1),children:[(0,s.jsx)(ef.A,{className:"w-3 h-3 mr-1"})," Favorites",(0,s.jsx)("button",{className:"ml-1 rounded-full hover:bg-background/50 p-0.5",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]}),O>0&&(0,s.jsxs)(eI,{variant:"secondary",className:"pl-2 pr-1 cursor-pointer hover:bg-muted",onClick:()=>M(0),children:[(0,s.jsx)(eU,{rating:O,size:3}),(0,s.jsx)("button",{className:"ml-1 rounded-full hover:bg-background/50 p-0.5",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]}),"all"!==_&&eN&&(0,s.jsxs)(eI,{variant:"secondary",className:"pl-2 pr-1 cursor-pointer hover:bg-muted",onClick:()=>U("all"),children:[eN,(0,s.jsx)("button",{className:"ml-1 rounded-full hover:bg-background/50 p-0.5",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]}),E.map(e=>(0,s.jsxs)(eI,{variant:"secondary",className:"pl-2 pr-1 cursor-pointer hover:bg-muted",onClick:()=>eg(e),children:[e,(0,s.jsx)("button",{className:"ml-1 rounded-full hover:bg-background/50 p-0.5",children:(0,s.jsx)(j.A,{className:"w-3 h-3"})})]},e)),(0,s.jsx)(h,{variant:"ghost",size:"sm",onClick:()=>{R(""),F([]),P(!1),U("all"),M(0)},className:"h-auto px-2 py-1 text-xs ml-auto",children:"Clear all"})]}),a.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-4 py-2 px-3 bg-muted/30 rounded-lg border flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eA,{id:"select-all-checkbox",checked:T.length>0&&T.length===ex.length,onCheckedChange:()=>{T.length===ex.length?z([]):z(ex.map(e=>e.id))},"aria-label":"Select all bookmarks"}),(0,s.jsx)(tk,{htmlFor:"select-all-checkbox",className:"text-sm font-medium",children:T.length>0?"".concat(T.length," selected"):"Select All"})]}),T.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 animate-fade-in",children:[(0,s.jsxs)(h,{variant:"destructive",size:"sm",onClick:()=>{m(T),z([])},children:[(0,s.jsx)(ee.A,{className:"w-4 h-4 mr-2"}),"Delete"]}),(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsxs)(h,{variant:"secondary",size:"sm",children:[(0,s.jsx)(eQ.A,{className:"mr-2 h-4 w-4"}),"Move to Folder"]})}),(0,s.jsxs)(to,{children:[(0,s.jsxs)(tc,{onSelect:()=>ev(null),children:[(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Remove from Folder"]}),(0,s.jsx)(tm,{}),u.map(e=>(0,s.jsxs)(tc,{onSelect:()=>ev(e.id),children:[(0,s.jsx)(Z.A,{className:"mr-2 h-4 w-4"}),e.name]},e.id))]})]}),(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsxs)(h,{variant:"secondary",size:"sm",children:[(0,s.jsx)(e$.A,{className:"mr-2 h-4 w-4"}),"Update Status"]})}),(0,s.jsx)(to,{children:i.map(e=>(0,s.jsx)(tc,{onSelect:()=>ej(e.id),children:e.label},e.id))})]})]})]}),0===ex.length?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center text-center p-10 border-2 border-dashed rounded-lg h-64 bg-muted/20",children:a.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e0.A,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"No Results Found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.A,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:k?'Folder "'.concat(k.name,'" is empty'):"No Bookmarks Yet"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:k?"Add some bookmarks to this folder.":"Add a new manga or manhwa to get started!"})]})}):(0,s.jsx)(e=>"manual"!==I||k?"grid"===V?(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.children}):(0,s.jsx)("div",{className:"space-y-2",children:e.children}):(0,s.jsx)(ah.x,{axis:"y",values:ex,onReorder:ep,className:"grid"===V?"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-2",children:e.children}),{children:ex.map(e=>(0,s.jsx)(eC,{bookmark:e,children:"grid"===V?(0,s.jsx)(eM,{bookmark:e,status:em[e.statusId],onEdit:ed,onToggleFavorite:f,onTogglePinned:p,onUpdateChapter:g,onDelete:m,isSelected:T.includes(e.id),onSelectionChange:eh,isCompact:B,isManualSortActive:"manual"===I&&!k}):(0,s.jsx)(eY,{bookmark:e,status:em[e.statusId],onEdit:ed,onToggleFavorite:f,onTogglePinned:p,onUpdateChapter:g,onDelete:m,isSelected:T.includes(e.id),onSelectionChange:eh,isCompact:B,isManualSortActive:"manual"===I&&!k})},e.id))}),er?(0,s.jsx)(t0,{open:q,onOpenChange:W,onSubmit:ec,onRevert:eu,bookmark:H,readingStatuses:i,folders:u}):(0,s.jsx)(ae,{open:G,onOpenChange:eo,onSubmit:ec,onRevert:eu,bookmark:H,readingStatuses:i,folders:u})]})}var ap=a(18553),ag=a(80659),aj=a(68098),av=a(31550),ab=a(93774),aN=a(96025),ay=a(16238),aw=a(94517),ak=a(17398),aC=a(83540),aS=a(24026);let aA={light:"",dark:".dark"},aR=r.createContext(null);function aI(){let e=r.useContext(aR);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let aD=r.forwardRef((e,t)=>{let{id:a,className:l,children:n,config:i,...d}=e,o=r.useId(),c="chart-".concat(a||o.replace(/:/g,""));return(0,s.jsx)(aR.Provider,{value:{config:i},children:(0,s.jsxs)("div",{"data-chart":c,ref:t,className:(0,u.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",l),...d,children:[(0,s.jsx)(aE,{id:c,config:i}),(0,s.jsx)(aC.u,{children:n})]})})});aD.displayName="Chart";let aE=e=>{let{id:t,config:a}=e,r=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return r.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(aA).map(e=>{let[a,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(r.map(e=>{var t;let[s,r]=e,l=(null==(t=r.theme)?void 0:t[a])||r.color;return l?"  --color-".concat(s,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};aw.m;let aF=r.forwardRef((e,t)=>{let{active:a,payload:l,className:n,indicator:i="dot",hideLabel:d=!1,hideIndicator:o=!1,label:c,labelFormatter:m,labelClassName:h,formatter:x,color:f,nameKey:p,labelKey:g}=e,{config:j}=aI(),v=r.useMemo(()=>{var e;if(d||!(null==l?void 0:l.length))return null;let[t]=l,a="".concat(g||t.dataKey||t.name||"value"),r=aT(j,t,a),n=g||"string"!=typeof c?null==r?void 0:r.label:(null==(e=j[c])?void 0:e.label)||c;return m?(0,s.jsx)("div",{className:(0,u.cn)("font-medium",h),children:m(n,l)}):n?(0,s.jsx)("div",{className:(0,u.cn)("font-medium",h),children:n}):null},[c,m,l,d,h,j,g]);if(!a||!(null==l?void 0:l.length))return null;let b=1===l.length&&"dot"!==i;return(0,s.jsxs)("div",{ref:t,className:(0,u.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[b?null:v,(0,s.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let a="".concat(p||e.name||e.dataKey||"value"),r=aT(j,e,a),l=f||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,u.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==r?void 0:r.icon)?(0,s.jsx)(r.icon,{}):!o&&(0,s.jsx)("div",{className:(0,u.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":b&&"dashed"===i}),style:{"--color-bg":l,"--color-border":l}}),(0,s.jsxs)("div",{className:(0,u.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[b?v:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function aT(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=a;return a in t&&"string"==typeof t[a]?r=t[a]:s&&a in s&&"string"==typeof s[a]&&(r=s[a]),r in e?e[r]:e[a]}aF.displayName="ChartTooltip",aS.s,r.forwardRef((e,t)=>{let{className:a,hideIcon:r=!1,payload:l,verticalAlign:n="bottom",nameKey:i}=e,{config:d}=aI();return(null==l?void 0:l.length)?(0,s.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",a),children:l.map(e=>{let t="".concat(i||e.dataKey||"value"),a=aT(d,e,t);return(0,s.jsxs)("div",{className:(0,u.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!r?(0,s.jsx)(a.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null}).displayName="ChartLegend";var az=a(965),aL=a(34855);function aP(e){let{className:t,classNames:a,showOutsideDays:r=!0,...l}=e;return(0,s.jsx)(aL.hv,{showOutsideDays:r,className:(0,u.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,u.cn)(m({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,u.cn)(m({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(az.A,{className:(0,u.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(tl.A,{className:(0,u.cn)("h-4 w-4",t),...a})}},...l})}aP.displayName="Calendar";var a_=a(83343),aU=a(76959);function aO(e){let{activityLog:t}=e,[a,l]=r.useState(),n=r.useMemo(()=>{let e=new Set;return t.forEach(t=>e.add((0,a_.H)(t.timestamp).toDateString())),Array.from(e).map(e=>new Date(e))},[t]),i=r.useMemo(()=>a?t.filter(e=>(0,aU.r)((0,a_.H)(e.timestamp),a)):[],[a,t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"\n    .rdp-day_activity::after {\n      content: '';\n      display: block;\n      position: absolute;\n      bottom: 4px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 4px;\n      height: 4px;\n      border-radius: 50%;\n      background-color: hsl(var(--primary));\n    }\n  "}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsx)("div",{children:(0,s.jsx)(aP,{mode:"single",selected:a,onSelect:e=>{e&&n.some(t=>(0,aU.r)(t,e))?l(e):l(void 0)},modifiers:{activity:n},modifiersClassNames:{activity:"activity"},className:"rounded-md border"})})}),a&&i.length>0&&(0,s.jsx)(ts,{className:"w-80",children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h4",{className:"font-medium leading-none",children:["Activity on ",a.toLocaleDateString()]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You made ",i.length," update(s)."]})]}),(0,s.jsx)(tx,{className:"h-48",children:(0,s.jsx)("div",{className:"grid gap-2 pr-4",children:i.map(e=>(0,s.jsxs)("div",{className:"text-xs p-2 bg-muted/50 rounded-md",children:[(0,s.jsx)("p",{children:e.description}),(0,s.jsx)("p",{className:"text-muted-foreground/80",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})})]})})]})]})}function aM(e){var t,a,l;let{bookmarks:n,readingStatuses:i,readingStreak:d,weeklySummary:o,activityLog:c}=e,{stats:u,recentlyUpdated:m,favoritesList:x,chartConfig:f,chartData:p}=(0,r.useMemo)(()=>{let e=n.length,t=n.filter(e=>e.isFavorite).length,a=new Set;n.forEach(e=>{var t;return null==(t=e.tags)?void 0:t.forEach(e=>a.add(e))});let s=a.size,r=[...n].sort((e,t)=>new Date(t.lastUpdated).getTime()-new Date(e.lastUpdated).getTime()),l=e>0?r[0]:null,d=r.slice(0,5),o=n.filter(e=>e.isFavorite).slice(0,5),c=n.reduce((e,t)=>(e[t.statusId]=(e[t.statusId]||0)+1,e),{}),u=i.map(e=>({name:e.label,value:c[e.id]||0,fill:e.color,icon:e.icon}));return{stats:{total:e,favorites:t,uniqueTags:s,latestUpdate:l},recentlyUpdated:d,favoritesList:o,chartConfig:i.reduce((e,t)=>{let a=t.icon?"".concat(t.icon," ").concat(t.label):t.label;return e[t.label]={label:a,color:t.color},e},{}),chartData:u}},[n,i]),g=e=>{let{bookmarks:t}=e;return(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative w-12 h-16 rounded-md overflow-hidden shrink-0",children:(0,s.jsx)(ed.default,{src:e.coverImage||"https://placehold.co/96x128.png",alt:"Cover for ".concat(e.title),"data-ai-hint":"manga cover",layout:"fill",objectFit:"cover",className:"bg-muted"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-semibold text-sm truncate",children:e.alias||e.title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Chapter ",e.chapter||0]})]}),(0,s.jsx)(h,{asChild:!0,variant:"secondary",size:"sm",children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read"})})]},e.id))})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(ey,{className:"text-sm font-medium",children:"Total Bookmarks"}),(0,s.jsx)(es.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(ek,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:u.total})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(ey,{className:"text-sm font-medium",children:"Favorites"}),(0,s.jsx)(ef.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(ek,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:u.favorites})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(ey,{className:"text-sm font-medium",children:"Reading Streak"}),(0,s.jsx)(ap.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(ek,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[d," ",0!==d?(0,s.jsxs)("span",{className:"text-lg",children:["day",d>1?"s":""]}):""]})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(ey,{className:"text-sm font-medium",children:"Last Updated"}),(0,s.jsx)(ag.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(ek,{children:[(0,s.jsx)("div",{className:"text-xl font-bold truncate",title:(null==(t=u.latestUpdate)?void 0:t.title)||"N/A",children:(null==(a=u.latestUpdate)?void 0:a.alias)||(null==(l=u.latestUpdate)?void 0:l.title)||"N/A"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:u.latestUpdate?new Date(u.latestUpdate.lastUpdated).toLocaleDateString():""})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsxs)(ey,{className:"flex items-center gap-2",children:[(0,s.jsx)(en.A,{className:"w-5 h-5"}),"Recently Updated"]}),(0,s.jsx)(ew,{children:"Your most recently read or updated titles."})]}),(0,s.jsx)(ek,{children:m.length>0?(0,s.jsx)(g,{bookmarks:m}):(0,s.jsx)("div",{className:"flex items-center justify-center h-40 text-muted-foreground",children:(0,s.jsx)("p",{children:"No recent activity."})})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsxs)(ey,{className:"flex items-center gap-2",children:[(0,s.jsx)(aj.A,{className:"w-5 h-5"}),"Your Favorites"]}),(0,s.jsx)(ew,{children:"Quick access to your favorite series."})]}),(0,s.jsx)(ek,{children:x.length>0?(0,s.jsx)(g,{bookmarks:x}):(0,s.jsx)("div",{className:"flex items-center justify-center h-40 text-muted-foreground",children:(0,s.jsx)("p",{children:"Mark some bookmarks as favorites!"})})})]}),(0,s.jsxs)(eb,{className:"lg:col-span-1",children:[(0,s.jsxs)(eN,{children:[(0,s.jsxs)(ey,{className:"flex items-center gap-2",children:[(0,s.jsx)(av.A,{className:"w-5 h-5"}),"This Week's Journal"]}),(0,s.jsx)(ew,{children:"Your reading summary for this week."})]}),(0,s.jsxs)(ek,{className:"space-y-4 text-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-3xl font-bold",children:o.chaptersRead}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"New chapters read"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-3xl font-bold",children:o.seriesUpdated.length}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Series updated"})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground pt-4",children:["Week started on ",new Date(o.startDate).toLocaleDateString()]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-2",children:[(0,s.jsxs)(eb,{children:[(0,s.jsx)(eN,{children:(0,s.jsx)(ey,{children:"Collection Status"})}),(0,s.jsx)(ek,{children:n.length>0?(0,s.jsx)(aD,{config:f,className:"h-64 w-full",children:(0,s.jsxs)(ab.E,{accessibilityLayer:!0,data:p,margin:{top:20,right:20,bottom:20,left:0},children:[(0,s.jsx)(aN.W,{dataKey:"name",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tick:(0,s.jsx)(e=>{let{x:t,y:a,payload:r}=e,l=p.find(e=>e.name===r.value);if(!l)return null;let{name:n,icon:i}=l;return(0,s.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:(0,s.jsxs)("text",{x:0,y:0,dy:16,textAnchor:"middle",fill:"hsl(var(--muted-foreground))",fontSize:12,children:[i&&(0,s.jsx)("tspan",{className:"text-lg",x:-12,y:"2",children:i}),(0,s.jsx)("tspan",{x:10*!!i,children:n})]})})},{}),height:40}),(0,s.jsx)(ay.h,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,s.jsx)(aw.m,{cursor:!1,content:(0,s.jsx)(aF,{hideLabel:!0})}),(0,s.jsx)(ak.y,{dataKey:"value",radius:[4,4,0,0]})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:(0,s.jsx)("p",{children:"No data to display. Add some bookmarks!"})})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Reading Diary"}),(0,s.jsx)(ew,{children:"A calendar view of your activity."})]}),(0,s.jsx)(ek,{children:(0,s.jsx)(aO,{activityLog:c})})]})]})]})}var aV=a(60794),aY=a(36936),aB=a(68027),aJ=a(69093),aH=a(93576),aK=a(68718),aq=a(31573),aW=a(9255),aG=a(15292),aX=a(54073);let aZ=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(aX.bL,{ref:t,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",a),...r,children:[(0,s.jsx)(aX.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(aX.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(aX.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});aZ.displayName=aX.bL.displayName;var aQ=a(51362),a$=a(32109),a0=a(23478);let a4=a0.bL,a2=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(a0.q7,{ref:t,className:(0,u.cn)("border-b",a),...r})});a2.displayName="AccordionItem";let a1=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsx)(a0.Y9,{className:"flex",children:(0,s.jsxs)(a0.l9,{ref:t,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...l,children:[r,(0,s.jsx)(eH.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});a1.displayName=a0.l9.displayName;let a5=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsx)(a0.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,s.jsx)("div",{className:(0,u.cn)("pb-4 pt-0",a),children:r})})});a5.displayName=a0.UC.displayName;var a8=a(45727);function a3(e){let{bookmarks:t,currentFilterState:a}=e,[l,n]=(0,r.useState)(0),[i,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=0;for(let t=0;t<localStorage.length;t++){let a=localStorage.key(t);if(a&&a.startsWith("mangamarks-")){let t=localStorage.getItem(a);t&&(e+=new Blob([t]).size)}}n(e)},[t]);let o=t.find(e=>e.id===i);return(0,s.jsxs)(eb,{className:"border-primary/50 animate-fade-in",children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Developer Debug Panel"}),(0,s.jsx)(ew,{children:"Advanced tools and information for power users."})]}),(0,s.jsxs)(ek,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(a8.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Local Storage Usage"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total size of app data stored in your browser."})]})]}),(0,s.jsxs)("p",{className:"font-mono text-lg font-semibold",children:[(l/1024).toFixed(2)," KB"]})]}),(0,s.jsxs)("div",{className:"p-4 border rounded-lg space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Inspect Bookmark JSON"}),(0,s.jsxs)(e1,{onValueChange:d,value:i||"",children:[(0,s.jsx)(e8,{children:(0,s.jsx)(e5,{placeholder:"Select a bookmark to inspect"})}),(0,s.jsx)(e7,{children:t.map(e=>(0,s.jsx)(e9,{value:e.id,children:e.title},e.id))})]}),o&&(0,s.jsx)(tM,{readOnly:!0,value:JSON.stringify(o,null,2),className:"h-64 resize-y font-mono text-xs"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eB.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Export Current Filter State"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Download a JSON file of the current view settings."})]})]}),(0,s.jsxs)(h,{onClick:()=>{if(!a)return;let e=new Blob([JSON.stringify(a,null,2)],{type:"text/json;charset=utf-8"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="MangaMarks_FilterState.json",t.click(),URL.revokeObjectURL(t.href)},disabled:!a,children:[(0,s.jsx)(aK.A,{className:"mr-2 h-4 w-4"})," Export"]})]})]})]})}let a6=[{name:"system",label:"System",icon:aV.A},{name:"light",label:"Light",icon:aY.A},{name:"dark",label:"Dark",icon:aB.A},{name:"mint",label:"Mint",icon:eV.A},{name:"sunset",label:"Sunset",icon:eV.A},{name:"ocean",label:"Ocean",icon:eV.A}];function a7(e){let{bookmarks:t,setBookmarks:a,readingStatuses:l,setReadingStatuses:i,sortPresets:d,setSortPresets:o,allTags:c,onRenameTag:u,onDeleteTag:m,auth:f,folders:p,setFolders:g,onResetStreak:v,onResetWeeklySummary:b,activityLog:N,setActivityLog:y,currentFilterState:w}=e,{toast:k}=(0,e_.dj)(),C=r.useRef(null),[S,A]=(0,r.useState)(null),[R,I]=(0,r.useState)(""),[D,E]=(0,r.useState)("#888888"),[F,T]=(0,r.useState)(""),[z,L]=(0,r.useState)(null),[P,_]=(0,r.useState)(16),[U,O]=(0,r.useState)(null),[M,V]=(0,r.useState)(""),[Y,B]=(0,r.useState)(""),[J,H]=(0,r.useState)(!1),[K,q]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(""),[$,et]=(0,r.useState)(""),[ea,es]=(0,r.useState)(""),[er,el]=n("mangamarks-dev-mode-enabled",!1),{theme:ei,setTheme:ed}=(0,aQ.D)(),[eo,eu]=n("mangamarks-app-theme","system");(0,r.useEffect)(()=>{let e=localStorage.getItem("mangamarks-font-size"),t=e?parseInt(e,10):16;_(t),document.documentElement.style.setProperty("--font-size-base","".concat(t,"px"));let a=localStorage.getItem("mangamarks-autobackup-timestamp");a&&O(new Date(parseInt(a,10)).toLocaleString())},[]),(0,r.useEffect)(()=>{document.body.classList.forEach(e=>{e.startsWith("theme-")&&document.body.classList.remove(e)}),"system"!==eo&&"light"!==eo&&"dark"!==eo&&document.body.classList.add("theme-".concat(eo))},[eo]);let em=e=>{eO(),eu(e),("light"===e||"dark"===e||"system"===e)&&ed(e)},eh=(0,r.useMemo)(()=>{let e={};for(let t of c)e[t]=0;for(let s of t){var a;null==(a=s.tags)||a.forEach(t=>{void 0!==e[t]&&e[t]++})}return e},[t,c]),ef=e=>{if(0===t.length)return void k({title:"No Bookmarks",description:"There's nothing to export yet.",variant:"destructive"});let a=JSON.stringify({bookmarks:t,readingStatuses:l,sortPresets:d,folders:p,activityLog:N},null,2);e&&(a=a$.AES.encrypt(a,e).toString());let s=new Blob([a],{type:"text/json;charset=utf-8"}),r=document.createElement("a");r.href=URL.createObjectURL(s);let n=(0,ec.GP)(new Date,"yyyy-MM-dd_HH-mm-ss");r.download="MangaMarks_Backup_".concat(n).concat(e?"_encrypted":"",".json"),r.click(),URL.revokeObjectURL(r.href),k({title:"Export Successful",description:"Your data has been downloaded".concat(e?" and encrypted":"",".")}),J&&H(!1),V("")},ep=e=>{let{bookmarks:t,readingStatuses:s,sortPresets:r,folders:l,activityLog:n}=JSON.parse(e);if(Array.isArray(t)&&Array.isArray(s))a(t),i(s),o(r||[]),g(l||[]),y(n||[]),k({title:"Import Successful",description:"Your data has been loaded."});else throw Error("Invalid backup file format.")},ev=e=>{k({title:"Import Failed",description:e instanceof Error?e.message:"Could not import data. File may be corrupt or in the wrong format.",variant:"destructive"})},eC=()=>{if(!R.trim())return void k({title:"Invalid Label",description:"Status label cannot be empty.",variant:"destructive"});i(e=>[...e,{id:Date.now().toString(),label:R,color:D,icon:F}]),I(""),E("#888888"),T("")},eS=()=>{if(!S||!S.label.trim())return void k({title:"Invalid Label",description:"Status label cannot be empty.",variant:"destructive"});i(e=>e.map(e=>e.id===S.id?S:e)),A(null)},eA=e=>{if(t.some(t=>t.statusId===e))return void k({title:"Cannot Delete",description:"This status is in use by one or more bookmarks. Reassign them before deleting.",variant:"destructive"});i(t=>t.filter(t=>t.id!==e))},eR=()=>{if(!z)return;let{oldName:e,newName:t}=z;if(!t.trim())return void k({title:"Invalid Name",description:"Tag name cannot be empty.",variant:"destructive"});if(c.includes(t.trim())&&t.trim()!==e){let a=eh[t.trim()];k({title:"Tags Merged",description:'Tag "'.concat(e,'" was merged into "').concat(t,'". ').concat(a+eh[e]," bookmarks now have this tag.")})}else t.trim()!==e&&k({title:"Tag Renamed",description:'Tag "'.concat(e,'" was successfully renamed to "').concat(t,'".')});u(e,t.trim()),L(null)},eD=e=>{L({oldName:e,newName:e})},eE=async()=>f.isPinSet?await f.checkPin(Z)?$.length<4?void k({title:"Error",description:"New PIN must be at least 4 digits.",variant:"destructive"}):$!==ea?void k({title:"Error",description:"New PINs do not match.",variant:"destructive"}):void(f.changePin($),k({title:"Success",description:"Your PIN has been changed."}),Q(""),et(""),es(""),G(!1)):void k({title:"Error",description:"Current PIN is incorrect.",variant:"destructive"}):void 0;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Settings"}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Appearance"}),(0,s.jsx)(ew,{children:"Customize the look and feel of the application."})]}),(0,s.jsxs)(ek,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(tk,{children:"Theme"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-2",children:a6.map(e=>(0,s.jsxs)(h,{variant:eo===e.name?"default":"outline",onClick:()=>em(e.name),children:[(0,s.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]},e.name))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(tk,{htmlFor:"font-size-slider",className:"block mb-2",children:"Font Size"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(aJ.A,{className:"h-5 w-5"}),(0,s.jsx)(aZ,{id:"font-size-slider",min:12,max:20,step:1,value:[P],onValueChange:e=>{let t=e[0];_(t),document.documentElement.style.setProperty("--font-size-base","".concat(t,"px")),localStorage.setItem("mangamarks-font-size",t.toString())}}),(0,s.jsx)(aJ.A,{className:"h-8 w-8"})]})]})]})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Security"}),(0,s.jsx)(ew,{children:"Manage your application lock settings."})]}),(0,s.jsxs)(ek,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(aH.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Enable PIN Lock"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Secure the app with a PIN code."})]})]}),(0,s.jsx)(tS,{checked:f.isLockEnabled,onCheckedChange:e=>f.setIsLockEnabled(e)})]}),f.isLockEnabled&&f.isPinSet&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"PIN Actions"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(aa,{open:W,onOpenChange:G,children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"secondary",children:"Change PIN"})}),(0,s.jsxs)(an,{children:[(0,s.jsx)(ai,{children:(0,s.jsx)(ao,{children:"Change PIN"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x,{type:"password",placeholder:"Current PIN",value:Z,onChange:e=>Q(e.target.value)}),(0,s.jsx)(x,{type:"password",placeholder:"New PIN",value:$,onChange:e=>et(e.target.value)}),(0,s.jsx)(x,{type:"password",placeholder:"Confirm New PIN",value:ea,onChange:e=>es(e.target.value)})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:eE,children:"Save Changes"})]})]})]}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"destructive",children:"Reset App"})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Are you absolutely sure?"}),(0,s.jsx)(ac,{children:"This action cannot be undone. This will permanently delete all your bookmarks, statuses, presets, and settings, and remove the PIN lock."})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>f.resetApp(),children:"Reset App"})]})]})]})]})]})]})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Data Management"}),(0,s.jsx)(ew,{children:"Import or export your bookmarks. Importing will overwrite your current lists."})]}),(0,s.jsxs)(ek,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)(h,{onClick:()=>ef(),disabled:0===t.length,className:"w-full",children:[(0,s.jsx)(aK.A,{className:"mr-2 h-4 w-4"})," Export to JSON"]}),(0,s.jsxs)(aa,{open:J,onOpenChange:H,children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsxs)(h,{variant:"secondary",disabled:0===t.length,className:"w-full",children:[(0,s.jsx)(aq.A,{className:"mr-2 h-4 w-4"})," Encrypt & Export"]})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Set Export Password"}),(0,s.jsx)(ac,{children:"Enter a password to encrypt your backup file. You will need this password to import it later."})]}),(0,s.jsx)(x,{id:"export-password-input",type:"password",placeholder:"Enter password...",value:M,onChange:e=>V(e.target.value),onKeyDown:e=>"Enter"===e.key&&ef(M)}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>ef(M),disabled:!M,children:"Confirm & Export"})]})]})]}),(0,s.jsxs)(h,{onClick:()=>{var e;null==(e=C.current)||e.click()},variant:"outline",className:"w-full col-span-1 sm:col-span-2",children:[(0,s.jsx)(tV.A,{className:"mr-2 h-4 w-4"})," Import from JSON"]}),(0,s.jsx)("input",{type:"file",ref:C,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=t=>{try{var a;let e=null==(a=t.target)?void 0:a.result;if("string"!=typeof e)throw Error("File content is not valid text.");if(e.includes("U2FsdGVkX1")){q(!0),s.onload=()=>{r(e,Y)};return}ep(e)}catch(e){ev(e)}finally{e.target&&(e.target.value="")}};let r=(e,t)=>{if(!t)return void k({title:"Import Failed",description:"Password is required for encrypted files.",variant:"destructive"});try{let a=a$.AES.decrypt(e,t).toString(a$.enc.Utf8);if(!a)throw Error("Invalid password or corrupted file.");ep(a),q(!1),B("")}catch(e){ev(e)}},l=s.onload,n=new FileReader;n.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;if(a.includes("U2FsdGVkX1")){q(!0);let e=document.getElementById("confirm-encrypted-import");null==e||e.addEventListener("click",()=>{var e;r(a,null==(e=document.getElementById("import-password-input"))?void 0:e.value)},{once:!0})}else l&&l.call(s,e)},n.readAsText(a)},accept:".json",className:"hidden"}),(0,s.jsx)(aa,{open:K,onOpenChange:q,children:(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Encrypted File Detected"}),(0,s.jsx)(ac,{children:"Please enter the password to decrypt and import your backup file."})]}),(0,s.jsx)(x,{id:"import-password-input",type:"password",placeholder:"Enter password...",value:Y,onChange:e=>B(e.target.value)}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{onClick:()=>B(""),children:"Cancel"}),(0,s.jsx)(au,{id:"confirm-encrypted-import",disabled:!Y,children:"Decrypt & Import"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,s.jsx)(en.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Automatic Local Backup"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last backup: ",U||"Never"]})]}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"secondary",disabled:!U,children:"Restore"})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Restore from Auto-Backup?"}),(0,s.jsxs)(ac,{children:["This will overwrite your current bookmarks and settings with the data from the last automatic backup created on ",U,". This action cannot be undone."]})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>{let e=localStorage.getItem("mangamarks-autobackup");if(e)try{let t=JSON.parse(e);a(t.bookmarks),i(t.readingStatuses),o(t.sortPresets||[]),g(t.folders||[]),y(t.activityLog||[]),k({title:"Auto-Backup Restored",description:"Your data has been restored from the latest automatic backup."})}catch(e){k({title:"Restore Failed",description:"The automatic backup data seems to be corrupted.",variant:"destructive"})}else k({title:"No Auto-Backup Found",description:"There is no automatic backup to restore from.",variant:"destructive"})},children:"Restore"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,s.jsx)(aW.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Reset Weekly Summary"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Start a new week of tracking now."})]}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"secondary",children:"Reset Now"})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Reset Weekly Summary?"}),(0,s.jsx)(ac,{children:"Are you sure you want to reset your weekly reading summary? This will start a new 7-day tracking period from today."})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>{b(),k({title:"Weekly Summary Reset"})},children:"Reset"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,s.jsx)(ap.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Reading Streak"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reset your current reading streak."})]}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"secondary",children:"Reset Streak"})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Reset Reading Streak?"}),(0,s.jsx)(ac,{children:"Are you sure you want to reset your reading streak back to zero?"})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:v,children:"Reset"})]})]})]})]})]})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Manage Reading Statuses"}),(0,s.jsx)(ew,{children:"Create, edit, or delete your custom reading statuses."})]}),(0,s.jsxs)(ek,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,s.jsx)("div",{className:"flex items-center gap-2 p-2 border rounded-lg",children:(null==S?void 0:S.id)===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x,{value:S.icon||"",onChange:e=>A(t=>t?{...t,icon:e.target.value.slice(0,2)}:null),placeholder:"\uD83D\uDD25",className:"h-8 w-12 text-center"}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsx)(h,{variant:"outline",size:"icon",style:{backgroundColor:S.color},className:"w-8 h-8 shrink-0",children:(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:S.color}})})}),(0,s.jsx)(ts,{className:"w-auto p-0",children:(0,s.jsx)(tX,{color:S.color,onChange:e=>A(t=>t?{...t,color:e}:null)})})]}),(0,s.jsx)(x,{value:S.label,onChange:e=>A(t=>t?{...t,label:e.target.value}:null),onKeyDown:e=>"Enter"===e.key&&eS(),className:"h-8 flex-1"}),(0,s.jsx)(h,{size:"icon",className:"h-8 w-8",onClick:eS,children:(0,s.jsx)(X.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>A(null),children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[e.icon&&(0,s.jsx)("span",{className:"text-lg w-5 text-center",children:e.icon}),(0,s.jsx)("div",{className:"w-5 h-5 rounded-full border",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"flex-1 font-medium",children:e.label}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>A({...e}),className:"w-8 h-8",children:(0,s.jsx)(eg.A,{className:"w-4 h-4"})}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive hover:text-destructive",disabled:t.some(t=>t.statusId===e.id),children:(0,s.jsx)(ee.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Are you sure?"}),(0,s.jsxs)(ac,{children:['This will permanently delete the "',e.label,'" status. This action cannot be undone.']})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>eA(e.id),children:"Delete"})]})]})]})]})},e.id))}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 border rounded-lg border-dashed",children:[(0,s.jsx)(x,{placeholder:"\uD83D\uDD25",value:F,onChange:e=>T(e.target.value.slice(0,2)),className:"h-8 w-12 text-center"}),(0,s.jsxs)(tt,{children:[(0,s.jsx)(ta,{asChild:!0,children:(0,s.jsx)(h,{variant:"outline",size:"icon",style:{backgroundColor:D},className:"w-8 h-8 shrink-0",children:(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:D}})})}),(0,s.jsx)(ts,{className:"w-auto p-0",children:(0,s.jsx)(tX,{color:D,onChange:E})})]}),(0,s.jsx)(x,{placeholder:"New status label...",value:R,onChange:e=>I(e.target.value),onKeyDown:e=>"Enter"===e.key&&eC(),className:"h-8 flex-1"}),(0,s.jsx)(h,{size:"icon",className:"h-8 w-8",onClick:eC,disabled:!R.trim(),children:(0,s.jsx)(ex.A,{className:"w-4 h-4"})})]})]})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Manage Tags"}),(0,s.jsx)(ew,{children:"Rename, merge, or delete tags across all your bookmarks."})]}),(0,s.jsx)(ek,{className:"space-y-2",children:c.length>0?c.map(e=>(0,s.jsx)("div",{className:"flex items-center gap-2 p-2 border rounded-lg",children:(null==z?void 0:z.oldName)===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ej.A,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)(x,{value:z.newName,onChange:e=>L(t=>t?{...t,newName:e.target.value}:null),onKeyDown:e=>"Enter"===e.key&&eR(),className:"h-8"}),(0,s.jsx)(h,{size:"icon",className:"h-8 w-8",onClick:eR,children:(0,s.jsx)(X.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>L(null),children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ej.A,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"flex-1 font-medium",children:e}),(0,s.jsx)(eI,{variant:"secondary",children:eh[e]}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>eD(e),className:"w-8 h-8",children:(0,s.jsx)(eg.A,{className:"w-4 h-4"})}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"w-8 h-8 text-destructive hover:text-destructive",children:(0,s.jsx)(ee.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Are you sure?"}),(0,s.jsxs)(ac,{children:['This will permanently remove the "',e,'" tag from all ',eh[e]," bookmarks. This action cannot be undone."]})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>m(e),children:"Delete Tag"})]})]})]})]})},e)):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tags yet. Add tags to your bookmarks to manage them here."})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Help & FAQ"}),(0,s.jsx)(ew,{children:"Find answers to common questions about using MangaMarks."})]}),(0,s.jsx)(ek,{children:(0,s.jsxs)(a4,{type:"single",collapsible:!0,className:"w-full",children:[(0,s.jsxs)(a2,{value:"item-1",children:[(0,s.jsx)(a1,{children:"How do I add a new bookmark?"}),(0,s.jsx)(a5,{children:'Click the "Add New Bookmark" button in the top header. You can paste a URL and click the sparkle icon ✨ to try and automatically fill in the title and chapter number. You can also fill in all the details manually, including uploading a custom cover image.'})]}),(0,s.jsxs)(a2,{value:"item-2",children:[(0,s.jsx)(a1,{children:"How do I edit multiple bookmarks?"}),(0,s.jsx)(a5,{children:"On desktop, you can use the checkboxes to select multiple bookmarks. On mobile, you can long-press a bookmark to enter selection mode. Once you have items selected, a new toolbar will appear at the top of the list allowing you to delete, move to a folder, or update the status of the selected bookmarks all at once."})]}),(0,s.jsxs)(a2,{value:"item-3",children:[(0,s.jsx)(a1,{children:"How do swipe gestures work on mobile?"}),(0,s.jsx)(a5,{children:"In the bookmark list on a mobile device, you can swipe a bookmark to the left to reveal quick actions. Swiping will show buttons to quickly toggle a bookmark as a favorite or to delete it."})]}),(0,s.jsxs)(a2,{value:"item-4",children:[(0,s.jsx)(a1,{children:"What if I forget my PIN?"}),(0,s.jsx)(a5,{children:'For security, there is no way to recover a forgotten PIN. You will need to click the "Forgot PIN?" link on the lock screen. This will trigger a full app reset, which will permanently delete all your bookmarks and settings. Be sure to make regular backups.'})]}),(0,s.jsxs)(a2,{value:"item-5",children:[(0,s.jsx)(a1,{children:"What is the Bookmark History feature?"}),(0,s.jsx)(a5,{children:'Every time you save a change to a bookmark, the app saves a snapshot of its previous state. In the "History" tab of the edit form, you can view these previous versions and revert the bookmark back to an older state if you made a mistake.'})]}),(0,s.jsxs)(a2,{value:"item-6",children:[(0,s.jsx)(a1,{children:"What are folders?"}),(0,s.jsx)(a5,{children:"Folders are a way to manually group your bookmarks into collections, like a bookshelf. You can create, rename, and delete folders from the sidebar. A bookmark can only be in one folder at a time. This is different from tags, where a bookmark can have multiple tags."})]})]})})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Advanced"}),(0,s.jsx)(ew,{children:"Manage advanced features and developer options."})]}),(0,s.jsx)(ek,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(aG.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Developer Mode"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show debugging tools and advanced information."})]})]}),(0,s.jsx)(tS,{checked:er,onCheckedChange:el})]})})]}),er&&(0,s.jsx)(a3,{bookmarks:t,currentFilterState:w})]})}function a9(){let{setTheme:e}=(0,aQ.D)();return(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsxs)(h,{variant:"ghost",size:"icon",children:[(0,s.jsx)(aY.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(aB.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,s.jsxs)(to,{align:"end",children:[(0,s.jsx)(tc,{onClick:()=>e("light"),children:"Light"}),(0,s.jsx)(tc,{onClick:()=>e("dark"),children:"Dark"}),(0,s.jsx)(tc,{onClick:()=>e("system"),children:"System"})]})]})}var se=a(6982);let st="mangamarks-auth-pin",sa="mangamarks-auth-lock-enabled";async function ss(e){let t=a$.lib.WordArray.random(16).toString(a$.enc.Hex),a=a$.PBKDF2(e,t,{keySize:16,iterations:1e3}).toString(a$.enc.Hex);return t+a}async function sr(e,t){let a=t.substring(0,32),s=t.substring(32);return a$.PBKDF2(e,a,{keySize:16,iterations:1e3}).toString(a$.enc.Hex)===s}let sl=new Set;function sn(e,t){window.localStorage.setItem(e,t),sl.forEach(a=>a(e,t))}function si(e,t){let a=(0,r.useCallback)(t=>{var a;return a=a=>{a===e&&t()},sl.add(a),()=>sl.delete(a)},[e]);return(0,r.useSyncExternalStore)(a,()=>t(localStorage.getItem(e)),()=>t(null))}var sd=a(28044);function so(e){let{isPinSet:t,onPinSubmit:a,onPinSet:l,onReset:n}=e,[i,d]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(!t),{toast:g}=(0,e_.dj)(),j=async e=>{if(e.preventDefault(),f){if(i.length<4)return void m("PIN must be at least 4 digits.");if(i!==o)return void m("PINs do not match.");l(i),g({title:"PIN Set Successfully!",description:"The app is now secured."})}else await a(i)||(m("Incorrect PIN. Please try again."),d(""))};return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,s.jsx)(eb,{className:"w-full max-w-sm",children:(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)(eN,{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto bg-primary/10 p-3 rounded-full w-fit",children:(0,s.jsx)(aH.A,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)(ey,{className:"mt-4",children:f?"Set Your PIN":"Enter PIN"}),(0,s.jsx)(ew,{children:f?"Create a 4-6 digit PIN to secure your data.":"Enter your PIN to unlock the app."})]}),(0,s.jsxs)(ek,{className:"space-y-4",children:[(0,s.jsx)(x,{type:"password",placeholder:"Enter PIN",value:i,onChange:e=>{let t=e.target.value;/^\d{0,6}$/.test(t)&&(d(t),u&&m(""))},className:"text-center text-lg tracking-[0.5em]",maxLength:6,autoFocus:!0}),f&&(0,s.jsx)(x,{type:"password",placeholder:"Confirm PIN",value:o,onChange:e=>{let t=e.target.value;/^\d{0,6}$/.test(t)&&(c(t),u&&m(""))},className:"text-center text-lg tracking-[0.5em]",maxLength:6}),u&&(0,s.jsx)("p",{className:"text-sm text-destructive text-center",children:u})]}),(0,s.jsxs)(eC,{className:"flex flex-col gap-4",children:[(0,s.jsx)(h,{type:"submit",className:"w-full",disabled:i.length<4,children:f?"Set PIN":"Unlock"}),t&&!f&&(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsx)(h,{variant:"link",size:"sm",type:"button",children:"Forgot PIN?"})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsxs)(ao,{className:"flex items-center gap-2",children:[(0,s.jsx)(sd.A,{className:"text-destructive"}),"Reset Your Data?"]}),(0,s.jsx)(ac,{children:"If you forgot your PIN, the only way to regain access is to reset the app. This will permanently delete all your bookmarks, statuses, and settings. This action cannot be undone."})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>{n(),g({title:"App Reset",description:"All data has been cleared. You can now set a new PIN.",duration:5e3}),p(!0),d(""),c(""),m("")},className:"bg-destructive hover:bg-destructive/90",children:"Reset App Data"})]})]})]})]})]})})})}let sc=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),su=r.forwardRef((e,t)=>{let{className:a,variant:r,...l}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,u.cn)(sc({variant:r}),a),...l})});su.displayName="Alert";let sm=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,u.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});sm.displayName="AlertTitle";let sh=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,u.cn)("text-sm [&_p]:leading-relaxed",a),...r})});sh.displayName="AlertDescription";var sx=a(16752);function sf(e){let{reminders:t,onDismiss:a}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"space-y-2 mb-6",children:t.map(e=>(0,s.jsxs)(su,{className:"flex items-center justify-between animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(sx.A,{className:"h-5 w-5 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(sm,{children:"Reminder: Time to read!"}),(0,s.jsxs)(sh,{children:["It's time to check for a new chapter of ",(0,s.jsx)("strong",{children:e.title}),"."]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h,{asChild:!0,size:"sm",children:(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:"Read"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>a(e.id),children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})]})]},e.id))})}var sp=a(3567),sg=a(19616),sj=a(35135),sv=a(80644),sb=a(44956),sN=a(87267);let sy={CREATE:(0,s.jsx)(eX.A,{className:"w-5 h-5 text-green-500"}),UPDATE:(0,s.jsx)(eg.A,{className:"w-5 h-5 text-blue-500"}),DELETE:(0,s.jsx)(sb.A,{className:"w-5 h-5 text-red-500"}),FAVORITE:(0,s.jsx)(ef.A,{className:"w-5 h-5 text-yellow-500"}),STATUS:(0,s.jsx)(sN.A,{className:"w-5 h-5 text-indigo-500"}),MOVE:(0,s.jsx)(eQ.A,{className:"w-5 h-5 text-purple-500"})};function sw(e){let{logs:t,onClearLog:a}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Activity Log"}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsxs)(h,{variant:"destructive",disabled:0===t.length,children:[(0,s.jsx)(ee.A,{className:"mr-2 h-4 w-4"}),"Clear Log"]})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Clear Activity Log?"}),(0,s.jsx)(ac,{children:"This will permanently delete all activity log entries. This action cannot be undone."})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:a,children:"Clear Log"})]})]})]})]}),(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{children:[(0,s.jsx)(ey,{children:"Recent Actions"}),(0,s.jsx)(ew,{children:"A timeline of all changes made in the app."})]}),(0,s.jsx)(ek,{children:t.length>0?(0,s.jsx)(tx,{className:"h-[60vh]",children:(0,s.jsxs)("div",{className:"relative pl-6",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 bg-border -translate-x-1/2 ml-3"}),t.map(e=>(0,s.jsxs)("div",{className:"relative flex items-start gap-4 mb-6",children:[(0,s.jsx)("div",{className:"absolute left-0 top-1.5 w-6 h-6 bg-background border-2 border-primary rounded-full flex items-center justify-center -translate-x-1/2",children:sy[e.type]||(0,s.jsx)(en.A,{className:"w-4 h-4 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm",children:e.description}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,eo.m)(new Date(e.timestamp),{addSuffix:!0})})]})]},e.id))]})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-10 border-2 border-dashed rounded-lg h-64 bg-muted/20",children:[(0,s.jsx)(en.A,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"No Activity Yet"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Your actions will appear here once you start using the app."})]})})]})]})}var sk=a(34548),sC=a(63482);let sS=()=>({chaptersRead:0,seriesUpdated:[],startDate:(0,sk.k)(new Date).toISOString()});var sA=a(92401);let sR=()=>({chaptersRead:0,date:(0,sA.R)().toISOString()});function sI(e){let{totalBookmarks:t,favorites:a,chaptersReadToday:r}=e;return(0,s.jsx)(D,{children:(0,s.jsx)(eb,{className:"fixed bottom-4 right-4 z-50 w-auto p-0 animate-fade-in shadow-lg border-primary/20 bg-background/60 backdrop-blur-lg",children:(0,s.jsxs)(ek,{className:"p-2 flex items-center gap-3",children:[(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(es.A,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{className:"font-bold",children:t})]})}),(0,s.jsx)(T,{side:"top",align:"center",children:(0,s.jsx)("p",{children:"Total Bookmarks"})})]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(ef.A,{className:"w-4 h-4 text-yellow-400"}),(0,s.jsx)("span",{className:"font-bold",children:a})]})}),(0,s.jsx)(T,{side:"top",align:"center",children:(0,s.jsx)("p",{children:"Favorites"})})]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(F,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(sN.A,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{className:"font-bold",children:r})]})}),(0,s.jsx)(T,{side:"top",align:"center",children:(0,s.jsx)("p",{children:"Chapters Read Today"})})]})]})})})}let sD=[{id:"reading",label:"Reading",color:"#3b82f6",icon:"\uD83D\uDCD6"},{id:"completed",label:"Completed",color:"#22c55e",icon:"✅"},{id:"on-hold",label:"On Hold",color:"#eab308",icon:"⏸️"},{id:"dropped",label:"Dropped",color:"#ef4444",icon:"\uD83D\uDDD1️"},{id:"plan-to-read",label:"Plan to Read",color:"#6b7280",icon:"\uD83D\uDDD3️"}];function sE(){let[e,t]=n("manga-bookmarks",[]),[a,l]=n("manga-statuses",sD),[i,d]=n("manga-presets",[]),[o,c]=n("manga-folders",[]),[u,m]=n("mangamarks-streak-count",0),[f,p]=n("mangamarks-streak-last-update",""),{activityLog:g,addLogEntry:v,clearLog:b,setActivityLog:N}=function(){let[e,t]=n("mangamarks-activity-log",[]);return{activityLog:e,setActivityLog:t,addLogEntry:(e,a,s,r)=>{let l={id:Date.now().toString(),timestamp:new Date().toISOString(),type:e,description:a,bookmarkId:s,bookmarkTitle:r};t(e=>[l,...e].slice(0,200))},clearLog:()=>{t([])}}}(),{weeklySummary:y,incrementChapters:w,addSeriesUpdate:k,resetSummary:C}=function(){let[e,t]=n("mangamarks-weekly-summary",sS());return(0,r.useEffect)(()=>{let a=new Date,s=(0,tQ.f)(new Date(e.startDate),7);(0,sC.Y)(s,a)&&t(sS())},[]),{weeklySummary:e,incrementChapters:e=>{t(t=>({...t,chaptersRead:t.chaptersRead+e}))},addSeriesUpdate:e=>{t(t=>t.seriesUpdated.includes(e)?t:{...t,seriesUpdated:[...t.seriesUpdated,e]})},resetSummary:()=>{t(sS())}}}(),{dailySummary:S,incrementChaptersToday:A}=function(){let[e,t]=n("mangamarks-daily-summary",sR());return(0,r.useEffect)(()=>{(0,sg.c)(new Date(e.date))||t(sR())},[]),{dailySummary:e,incrementChaptersToday:e=>{t(t=>(0,sg.c)(new Date(t.date))?{...t,chaptersRead:t.chaptersRead+e}:{chaptersRead:e,date:(0,sA.R)().toISOString()})}}}(),[R,I]=(0,r.useState)("dashboard"),[D,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(!1),[z,L]=(0,r.useState)(null),[W,ed]=(0,r.useState)(!1),{toast:eo}=(0,e_.dj)(),[ec,eu]=(0,r.useState)(null),{isLocked:em,isLockEnabled:eh,setIsLockEnabled:ex,unlockApp:ef,setPin:ep,changePin:eg,resetApp:ej,isPinSet:ev,checkPin:eb}=function(){let[e,t]=(0,r.useState)(!0),a=function(e){let t=r.useRef(null),a=(0,r.useCallback)(()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(e,3e5)},[e]),s=(0,r.useCallback)(()=>{t.current&&clearTimeout(t.current)},[]);return(0,r.useEffect)(()=>{let e=["mousemove","keydown","click","scroll","touchstart"];return e.forEach(e=>window.addEventListener(e,a)),a(),()=>{e.forEach(e=>window.removeEventListener(e,a)),s()}},[a,s]),{reset:a}}(()=>t(!0)),s=si(sa,e=>{if(null===e)return!1;let a="true"===e;return a||t(!1),a}),l=si(st,e=>!!e),n=(0,r.useCallback)(async e=>{if(!s)return!0;let r=localStorage.getItem(st);if(!r)return!1;let l=await sr(e,r);return l&&(t(!1),a.reset()),l},[s,a]),i=(0,r.useCallback)(async e=>{let s=await ss(e);localStorage.setItem(st,s),t(!1),a.reset(),sn(st,s)},[a]),d=(0,r.useCallback)(async e=>{let t=await ss(e);localStorage.setItem(st,t),sn(st,t)},[]),o=(0,r.useCallback)(e=>{localStorage.setItem(sa,String(e)),e&&!l?t(!0):e||t(!1),sn(sa,String(e))},[l]),c=(0,r.useCallback)(async e=>{let t=localStorage.getItem(st);return!!t&&await sr(e,t)},[]),u=(0,r.useCallback)(()=>{Object.keys(localStorage).forEach(e=>{e.startsWith("mangamarks-")&&localStorage.removeItem(e)}),sn(st,null),sn(sa,"false"),window.location.reload()},[]);return(0,r.useEffect)(()=>{s&&l?t(!0):t(!1)},[]),{isLocked:e,isLockEnabled:s,setIsLockEnabled:o,unlockApp:n,setPin:i,changePin:d,resetApp:u,isPinSet:l,checkPin:c}}();(0,r.useEffect)(()=>{ed(!0);let t=localStorage.getItem("mangamarks-autobackup-timestamp"),s=Date.now();(!t||s-parseInt(t,10)>2592e5)&&e.length>0&&(localStorage.setItem("mangamarks-autobackup",JSON.stringify({bookmarks:e,readingStatuses:a,sortPresets:i,folders:o,activityLog:g})),localStorage.setItem("mangamarks-autobackup-timestamp",s.toString()),console.log("MangaMarks: Performed automatic backup."))},[e,a,i,o,g]);let eN=(0,r.useMemo)(()=>e.filter(e=>e.reminderDate&&(0,sp.R)(new Date(e.reminderDate))),[e]),ey=()=>{let e=new Date,t=f?new Date(f):null;t&&(0,sg.c)(t)||(t&&(0,sj.P)(t)?m(e=>e+1):m(1),p((0,sv.o)(e).toISOString()))},ew=e=>{let t={id:Date.now().toString(),name:e};c(e=>[...e,t]),eo({title:"Folder Created",description:'"'.concat(e,'" has been added.')})},ek=(e,t)=>{c(a=>a.map(a=>a.id===e?{...a,name:t}:a)),eo({title:"Folder Renamed"})},eC=e=>{t(t=>t.map(t=>t.folderId===e?{...t,folderId:void 0}:t)),c(t=>t.filter(t=>t.id!==e)),D===e&&E(null),eo({title:"Folder Deleted"})},eS=(e,s)=>{ey(),t(t=>{let r=new Date().toISOString();if(s){let i=t.find(e=>e.id===s);if(!i)return t;let{history:d,...o}=i,c=[{state:o,date:r},...d||[]].slice(0,5),u={...o,...e,history:c,lastUpdated:r},m='Updated "'.concat(u.title,'".');if(i.chapter!==u.chapter){let e=(u.chapter||0)-(i.chapter||0);m='Set chapter for "'.concat(u.title,'" to ').concat(u.chapter,"."),e>0&&(w(e),A(e))}else if(i.statusId!==u.statusId){var l,n;let e=null==(l=a.find(e=>e.id===i.statusId))?void 0:l.label,t=null==(n=a.find(e=>e.id===u.statusId))?void 0:n.label;m='Changed status of "'.concat(u.title,'" from ').concat(e," to ").concat(t,".")}return v("UPDATE",m,s,u.title),k(s),t.map(e=>e.id===s?u:e)}{let a={...e,id:Date.now().toString(),lastUpdated:r,isFavorite:!1,isPinned:!1,manualOrder:t.length},s=t.find(e=>e.url===a.url);if(s&&a.title.replace(/ chapter .*/i,"")===s.title.replace(/ chapter .*/i,""))return v("CREATE",'Replaced "'.concat(s.title,'" with new chapter from same series.'),s.id,a.title),t.map(e=>e.id===s.id?{...a,id:s.id}:e);return v("CREATE",'Added new bookmark: "'.concat(a.title,'".'),a.id,a.title),[a,...t]}})},eA=(e,a)=>{t(t=>t.map(t=>{if(t.id===e){var s;let e=(null==(s=t.history)?void 0:s.filter(e=>e.date!==a.date))||[];return{...a.state,history:e}}return t})),v("UPDATE",'Reverted "'.concat(a.state.title,'" to a previous version.'),e,a.state.title),eo({title:"Bookmark Reverted",description:'"'.concat(a.state.title,'" has been restored to a previous version.')})},eR=(0,r.useMemo)(()=>{let t=new Set;return e.forEach(e=>{var a;return null==(a=e.tags)?void 0:a.forEach(e=>t.add(e))}),Array.from(t).sort()},[e]),eI=(0,r.useMemo)(()=>"list"!==R?e:D?e.filter(e=>e.folderId===D):e,[e,R,D]),eD=(0,r.useMemo)(()=>e.filter(e=>e.isFavorite).length,[e]);return W?eh&&em?(0,s.jsx)(so,{isPinSet:ev,onPinSubmit:ef,onPinSet:ep,onReset:ej}):(0,s.jsxs)(P,{children:[(0,s.jsxs)(_,{children:[(0,s.jsx)(M,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(es.A,{className:"w-8 h-8 text-primary"}),(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tighter text-foreground group-data-[collapsible=icon]:hidden",children:"MangaMarks"})]})}),(0,s.jsxs)(Y,{children:[(0,s.jsxs)(K,{children:[(0,s.jsx)(q,{children:(0,s.jsxs)(G,{onClick:()=>I("dashboard"),isActive:"dashboard"===R,tooltip:"Dashboard",children:[(0,s.jsx)(er.A,{}),(0,s.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"Dashboard"})]})}),(0,s.jsx)(q,{children:(0,s.jsxs)(G,{onClick:()=>{E(null),I("list")},isActive:"list"===R&&!D,tooltip:"All Bookmarks",children:[(0,s.jsx)(el.A,{}),(0,s.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"All Bookmarks"})]})}),(0,s.jsx)(q,{children:(0,s.jsxs)(G,{onClick:()=>I("activity"),isActive:"activity"===R,tooltip:"Activity Log",children:[(0,s.jsx)(en.A,{}),(0,s.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"Activity"})]})}),(0,s.jsx)(q,{children:(0,s.jsxs)(G,{onClick:()=>I("settings"),isActive:"settings"===R,tooltip:"Settings",children:[(0,s.jsx)(ei.A,{}),(0,s.jsx)("span",{className:"group-data-[collapsible=icon]:hidden",children:"Settings"})]})})]}),(0,s.jsx)(V,{}),(0,s.jsx)(()=>{let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),d=e=>{t(e.id),l(e.name)},c=()=>{t(null),i(!1),l("")},u=()=>{a.trim()&&(e?ek(e,a):n&&ew(a),c())};return(0,s.jsxs)(B,{children:[(0,s.jsx)(J,{children:"Folders"}),(0,s.jsx)(H,{children:(0,s.jsxs)(K,{children:[o.map(t=>e===t.id?(0,s.jsxs)("div",{className:"flex items-center gap-1 p-1",children:[(0,s.jsx)(x,{value:a,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&u(),className:"h-7",autoFocus:!0}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:u,children:(0,s.jsx)(X.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:c,children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]},t.id):(0,s.jsxs)(q,{children:[(0,s.jsxs)(G,{onClick:()=>{E(t.id),I("list")},isActive:"list"===R&&D===t.id,tooltip:t.name,size:"sm",children:[(0,s.jsx)(Z.A,{}),(0,s.jsx)("span",{children:t.name})]}),(0,s.jsxs)(ti,{children:[(0,s.jsx)(td,{asChild:!0,children:(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6 opacity-50 hover:opacity-100",children:(0,s.jsx)(Q.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(to,{children:[(0,s.jsxs)(tc,{onSelect:()=>d(t),children:[(0,s.jsx)($.A,{className:"mr-2 h-4 w-4"})," Rename"]}),(0,s.jsxs)(aa,{children:[(0,s.jsx)(as,{asChild:!0,children:(0,s.jsxs)(tc,{onSelect:e=>e.preventDefault(),className:"text-destructive",children:[(0,s.jsx)(ee.A,{className:"mr-2 h-4 w-4"})," Delete"]})}),(0,s.jsxs)(an,{children:[(0,s.jsxs)(ai,{children:[(0,s.jsx)(ao,{children:"Delete Folder?"}),(0,s.jsxs)(ac,{children:['Are you sure you want to delete the folder "',t.name,'"? Bookmarks within it will not be deleted.']})]}),(0,s.jsxs)(ad,{children:[(0,s.jsx)(am,{children:"Cancel"}),(0,s.jsx)(au,{onClick:()=>eC(t.id),children:"Delete"})]})]})]})]})]})]},t.id)),n&&(0,s.jsxs)("div",{className:"flex items-center gap-1 p-1",children:[(0,s.jsx)(x,{placeholder:"New folder name",value:a,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&u(),className:"h-7",autoFocus:!0}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:u,children:(0,s.jsx)(X.A,{className:"w-4 h-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:c,children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(q,{children:(0,s.jsxs)(G,{onClick:()=>{i(!0),l("")},size:"sm",className:"text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(et.A,{}),(0,s.jsx)("span",{children:"Add Folder"})]})})]})})]})},{})]})]}),(0,s.jsxs)(O,{children:[(0,s.jsxs)("header",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)(U,{}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(a9,{}),(0,s.jsx)(h,{onClick:()=>{L(null),T(!0)},children:"Add New Bookmark"})]})]}),(0,s.jsxs)("main",{className:"flex-1 p-4 md:p-6 lg:p-8",children:[(0,s.jsx)(sf,{reminders:eN,onDismiss:e=>{t(t=>t.map(t=>t.id===e?{...t,reminderDate:void 0}:t))}}),(0,s.jsxs)(s.Fragment,{children:["dashboard"===R&&(0,s.jsx)(aM,{bookmarks:e,readingStatuses:a,readingStreak:u,weeklySummary:y,activityLog:g}),"list"===R&&(0,s.jsx)(af,{bookmarks:eI,setBookmarks:t,allBookmarks:e,readingStatuses:a,sortPresets:i,setSortPresets:d,onDelete:a=>{let r=e.filter(e=>a.includes(e.id));t(e=>e.filter(e=>!a.includes(e.id))),r.forEach(e=>{v("DELETE",'Deleted bookmark: "'.concat(e.title,'".'),e.id,e.title)}),eo({title:"".concat(r.length," bookmark(s) deleted"),description:"You can undo this action.",action:(0,s.jsx)(se.Qg,{altText:"Undo",onClick:()=>{t(e=>[...r,...e].sort((e,t)=>new Date(t.lastUpdated).getTime()-new Date(e.lastUpdated).getTime())),r.forEach(e=>{v("CREATE",'Restored deleted bookmark: "'.concat(e.title,'".'),e.id,e.title)})},children:"Undo"})})},toggleFavorite:e=>{t(t=>t.map(t=>{if(t.id===e){let a=!t.isFavorite;return v("FAVORITE",a?'Marked "'.concat(t.title,'" as a favorite.'):'Removed "'.concat(t.title,'" from favorites.'),e,t.title),k(e),{...t,isFavorite:a}}return t}))},onTogglePinned:e=>{t(t=>t.map(t=>{if(t.id===e){let a=!t.isPinned;return v("UPDATE",a?'Pinned "'.concat(t.title,'".'):'Unpinned "'.concat(t.title,'".'),e,t.title),{...t,isPinned:a}}return t}))},onUpdateChapter:(t,a)=>{let s=e.find(e=>e.id===t);s&&eS({...s,chapter:a>=0?a:0},t)},onUpdateStatus:(e,s)=>{var r;ey();let l=(null==(r=a.find(e=>e.id===s))?void 0:r.label)||"a new status",n=new Date().toISOString();t(t=>t.map(t=>{if(e.includes(t.id)){var r;let e=null==(r=a.find(e=>e.id===t.statusId))?void 0:r.label;v("STATUS",'Changed status for "'.concat(t.title,'" from ').concat(e," to ").concat(l,"."),t.id,t.title),k(t.id);let{history:i,...d}=t,o=[{state:d,date:n},...i||[]].slice(0,5);return{...t,statusId:s,lastUpdated:n,history:o}}return t}))},allTags:eR,onEditSubmit:eS,onRevert:eA,folders:o,onMoveToFolder:(e,a)=>{var s;let r=new Date().toISOString(),l=a?(null==(s=o.find(e=>e.id===a))?void 0:s.name)||"a folder":"No Folder";t(t=>t.map(t=>e.includes(t.id)?(v("MOVE",'Moved "'.concat(t.title,'" to folder: ').concat(l,"."),t.id,t.title),k(t.id),{...t,folderId:null!=a?a:void 0,lastUpdated:r}):t))},activeFolder:D?o.find(e=>e.id===D):void 0,onClearFolderFilter:()=>E(null),onFilterStateChange:eu}),"activity"===R&&(0,s.jsx)(sw,{logs:g,onClearLog:b}),"settings"===R&&(0,s.jsx)(a7,{bookmarks:e,setBookmarks:t,readingStatuses:a,setReadingStatuses:l,sortPresets:i,setSortPresets:d,allTags:eR,onRenameTag:(e,a)=>{a&&e!==a&&t(t=>t.map(t=>{var s;if(null==(s=t.tags)?void 0:s.includes(e)){let s=Array.from(new Set([...t.tags.filter(t=>t!==e),a]));return{...t,tags:s}}return t}))},onDeleteTag:e=>{t(t=>t.map(t=>{var a;return(null==(a=t.tags)?void 0:a.includes(e))?{...t,tags:t.tags.filter(t=>t!==e)}:t}))},auth:{isLockEnabled:eh,setIsLockEnabled:ex,isPinSet:ev,changePin:eg,checkPin:eb,resetApp:ej},folders:o,setFolders:c,onResetStreak:()=>{m(0),p(""),eo({title:"Reading Streak Reset"})},activityLog:g,setActivityLog:N,currentFilterState:ec,onResetWeeklySummary:C})]})]}),(0,s.jsx)(sI,{totalBookmarks:e.length,favorites:eD,chaptersReadToday:S.chaptersRead})]}),(0,s.jsx)(ae,{open:F,onOpenChange:e=>{e||L(null),T(e)},onSubmit:eS,onRevert:eA,bookmark:z,readingStatuses:a,folders:o})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)(ea.A,{className:"w-8 h-8 animate-spin text-muted-foreground"})})}},6982:(e,t,a)=>{"use strict";a.d(t,{Qg:()=>h,Sb:()=>f,US:()=>c,aD:()=>p,eC:()=>x,tE:()=>o,y8:()=>m});var s=a(95155),r=a(12115),l=a(26621),n=a(74466),i=a(25318),d=a(59434);let o=l.Kq,c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...r})});c.displayName=l.LM.displayName;let u=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)(l.bL,{ref:t,className:(0,d.cn)(u({variant:r}),a),...n})});m.displayName=l.bL.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...r})});h.displayName=l.rc.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.bm.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",a),...r})});f.displayName=l.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",a),...r})});p.displayName=l.VY.displayName},32751:(e,t,a)=>{Promise.resolve().then(a.bind(a,4))},50477:()=>{},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(52596),r=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var s=a(12115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),setTimeout(()=>{s()},4500),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(o);return s.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[775,823,441,684,358],()=>t(32751)),_N_E=e.O()}]);